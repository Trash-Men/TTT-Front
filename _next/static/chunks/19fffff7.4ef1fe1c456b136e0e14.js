(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[6],{JfWr:function(t,e,i){"use strict";(function(t){i.d(e,"a",(function(){return ui}));var n=i("TCOF"),a=i("AWXE"),r=i("AKWm"),s=i("4k54"),o=i("4xGt"),c=i("Enya"),l=i("X486"),u=i("Vibt"),d=i("wWUp"),h=i("AJ/N"),g=i("ziQ1"),f=i("sQjb"),p=i("jICm"),x=i("muaG"),v=i("1nUc"),_=i("d4SJ"),m=i("d5JU"),y=i("O03L"),b=i("sK06"),T=i("Kcim"),w=i("VkQ2"),A=i("Q43v"),k=i("pL0w"),L=i("qE0H"),S=i("zD5G"),O=i("SDD1"),E=i("e9ab"),C=(i("iPFw"),i("ZQwz"),i("44y/"),i("+ugm"),i("RhHs")),I=i("ZRP+"),R=(i("6h3Y"),i("2TRZ"),i("FmoU")),X={arc:"bb-arc",arcLabelLine:"bb-arc-label-line",arcs:"bb-arcs",area:"bb-area",areas:"bb-areas",axis:"bb-axis",axisX:"bb-axis-x",axisXLabel:"bb-axis-x-label",axisY:"bb-axis-y",axisY2:"bb-axis-y2",axisY2Label:"bb-axis-y2-label",axisYLabel:"bb-axis-y-label",bar:"bb-bar",bars:"bb-bars",brush:"bb-brush",button:"bb-button",buttonZoomReset:"bb-zoom-reset",chart:"bb-chart",chartArc:"bb-chart-arc",chartArcs:"bb-chart-arcs",chartArcsBackground:"bb-chart-arcs-background",chartArcsGaugeMax:"bb-chart-arcs-gauge-max",chartArcsGaugeMin:"bb-chart-arcs-gauge-min",chartArcsGaugeUnit:"bb-chart-arcs-gauge-unit",chartArcsTitle:"bb-chart-arcs-title",chartArcsGaugeTitle:"bb-chart-arcs-gauge-title",chartBar:"bb-chart-bar",chartBars:"bb-chart-bars",chartCircles:"bb-chart-circles",chartLine:"bb-chart-line",chartLines:"bb-chart-lines",chartRadar:"bb-chart-radar",chartRadars:"bb-chart-radars",chartText:"bb-chart-text",chartTexts:"bb-chart-texts",circle:"bb-circle",circles:"bb-circles",colorPattern:"bb-color-pattern",colorScale:"bb-colorscale",defocused:"bb-defocused",dragarea:"bb-dragarea",empty:"bb-empty",eventRect:"bb-event-rect",eventRects:"bb-event-rects",eventRectsMultiple:"bb-event-rects-multiple",eventRectsSingle:"bb-event-rects-single",focused:"bb-focused",gaugeValue:"bb-gauge-value",grid:"bb-grid",gridLines:"bb-grid-lines",legend:"bb-legend",legendBackground:"bb-legend-background",legendItem:"bb-legend-item",legendItemEvent:"bb-legend-item-event",legendItemFocused:"bb-legend-item-focused",legendItemHidden:"bb-legend-item-hidden",legendItemPoint:"bb-legend-item-point",legendItemTile:"bb-legend-item-tile",level:"bb-level",levels:"bb-levels",line:"bb-line",lines:"bb-lines",main:"bb-main",region:"bb-region",regions:"bb-regions",selectedCircle:"bb-selected-circle",selectedCircles:"bb-selected-circles",shape:"bb-shape",shapes:"bb-shapes",stanfordElements:"bb-stanford-elements",stanfordLine:"bb-stanford-line",stanfordLines:"bb-stanford-lines",stanfordRegion:"bb-stanford-region",stanfordRegions:"bb-stanford-regions",subchart:"bb-subchart",target:"bb-target",text:"bb-text",texts:"bb-texts",title:"bb-title",tooltip:"bb-tooltip",tooltipContainer:"bb-tooltip-container",tooltipName:"bb-tooltip-name",xgrid:"bb-xgrid",xgridFocus:"bb-xgrid-focus",xgridLine:"bb-xgrid-line",xgridLines:"bb-xgrid-lines",xgrids:"bb-xgrids",ygrid:"bb-ygrid",ygridFocus:"bb-ygrid-focus",ygridLine:"bb-ygrid-line",ygridLines:"bb-ygrid-lines",ygrids:"bb-ygrids",zoomBrush:"bb-zoom-brush",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_",TextOverlapping:"text-overlapping"},D={element:function(){return{chart:null,main:null,svg:null,axis:{x:null,y:null,y2:null,subX:null},defs:null,tooltip:null,legend:null,title:null,subchart:{main:null,bar:null,line:null,area:null},arcs:null,bar:null,line:null,area:null,circle:null,radar:null,text:null,grid:{main:null,x:null,y:null},gridLines:{main:null,x:null,y:null},region:{main:null,list:null},eventRect:null}},state:function(){return{width:0,width2:0,height:0,height2:0,margin:{top:0,bottom:0,left:0,right:0},margin2:{top:0,bottom:0,left:0,right:0},margin3:{top:0,bottom:0,left:0,right:0},arcWidth:0,arcHeight:0,xAxisHeight:0,hasAxis:!1,hasRadar:!1,current:{width:0,height:0,dataMax:0,maxTickWidths:{x:{size:0,ticks:[],clipPath:0,domain:""},y:{size:0,domain:""},y2:{size:0,domain:""}},types:[]},isLegendRight:!1,isLegendInset:!1,isLegendTop:!1,isLegendLeft:!1,legendStep:0,legendItemWidth:0,legendItemHeight:0,legendHasRendered:!1,eventReceiver:{currentIdx:-1,rect:{},data:[],coords:[]},axis:{x:{padding:{left:0,right:0},tickCount:0}},rotatedPadding:{left:30,right:0,top:5},withoutFadeIn:{},inputType:"",datetimeId:"",clip:{id:"",idXAxis:"",idYAxis:"",idXAxisTickTexts:"",idGrid:"",idSubchart:"",path:"",pathXAxis:"",pathYAxis:"",pathXAxisTickTexts:"",pathGrid:""},dragStart:null,dragging:!1,flowing:!1,cancelClick:!1,mouseover:!1,rendered:!1,transiting:!1,redrawing:!1,resizing:!1,toggling:!1,zooming:!1,hasNegativeValue:!1,hasPositiveValue:!0,orgAreaOpacity:"0.2",hiddenTargetIds:[],hiddenLegendIds:[],focusedTargetIds:[],defocusedTargetIds:[],radius:0,innerRadius:0,outerRadius:void 0,innerRadiusRatio:0,gaugeArcWidth:0,radiusExpanded:0,xgridAttr:{x1:null,x2:null,y1:null,y2:null}}}},F=function(){function t(){var t=this;Object.keys(D).forEach((function(e){t[e]=new D[e]}))}return t.prototype.getStore=function(t){return this[t]},t}(),z=function(){return(z=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var a in e=arguments[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};function P(t,e){for(var i=0,n=e.length,a=t.length;i<n;i++,a++)t[a]=e[i];return t}var M={bindto:"#chart",background:{},clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,onover:void 0,onout:void 0,onresize:void 0,onresized:void 0,onbeforeinit:void 0,oninit:void 0,onafterinit:void 0,onrendered:void 0,transition_duration:350,plugins:[],render:{},regions:[]},B={data_x:void 0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_type:void 0,data_types:{},data_order:"desc",data_groups:[],data_color:void 0,data_colors:{},data_labels:{},data_labels_colors:void 0,data_labels_position:{},data_hide:!1,data_filter:void 0,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:"csv",data_keys:void 0,data_empty_label_text:""},$={color_pattern:[],color_tiles:void 0,color_threshold:{},color_onover:void 0},Y={interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{}},N={legend_show:!0,legend_hide:!1,legend_contents_bindto:void 0,legend_contents_template:void 0,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,legend_usePoint:!1},V={title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"center"},j={tooltip_show:!0,tooltip_doNotHide:!1,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:{},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_linked:!1,tooltip_linked_name:"",tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_onshown:function(){},tooltip_onhidden:function(){},tooltip_order:null},H="object"===typeof globalThis&&null!==globalThis&&globalThis.Object===Object&&globalThis||"object"===typeof t&&null!==t&&t.Object===Object&&t||"object"===typeof self&&null!==self&&self.Object===Object&&self||Function("return this")(),G=H&&H.document,W=function(t){return t||0===t},U=function(t){return"function"===typeof t},Z=function(t){return"string"===typeof t},J=function(t){return"number"===typeof t},K=function(t){return"undefined"===typeof t},q=function(t){return"undefined"!==typeof t},Q=function(t){return"boolean"===typeof t},tt=function(t){return 10*Math.ceil(t/10)},et=function(t){return Math.ceil(t)+.5},it=function(t){return t[1]-t[0]},nt=function(t){return"object"===typeof t},at=function(t){return K(t)||null===t||Z(t)&&0===t.length||nt(t)&&!(t instanceof Date)&&0===Object.keys(t).length||J(t)&&isNaN(t)},rt=function(t){return!at(t)},st=function(t){return Array.isArray(t)},ot=function(t){return t&&!t.nodeType&&nt(t)&&!st(t)};function ct(t,e,i){return q(t[e])?t[e]:i}function lt(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var n=U(t);return n&&t.call.apply(t,e),n}function ut(t,e){var i=0;t.each((function(){return++i})).on("end",(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];!--i&&e.apply.apply(e,P([this],t))}))}function dt(t){return Z(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function ht(t,e,i,n){if(void 0===i&&(i=[-1,1]),void 0===n&&(n=!1),t&&Z(e))if(-1===e.indexOf("\n"))t.text(e);else{var a=[t.text(),e].map((function(t){return t.replace(/[\s\n]/g,"")}));if(a[0]!==a[1]){var r=e.split("\n"),s=n?r.length-1:1;t.html(""),r.forEach((function(e,n){t.append("tspan").attr("x",0).attr("dy",(0===n?i[0]*s:i[1])+"em").text(e)}))}}}function gt(t){var e=t.getBBox(),i=e.x,n=e.y,a=e.width,r=e.height;return[{x:i,y:n+r},{x:i,y:n},{x:i+a,y:n},{x:i+a,y:n+r}]}function ft(t){var e,i=t.$el,n=a.c,r=i.subchart.main||i.main;return n&&"brush"===n.type?e=n.selection:r&&(e=r.select("."+X.brush).node())&&(e=Object(l.a)(e)),e}function pt(t){return!("rect"in t)||"rect"in t&&t.hasAttribute("width")&&t.rect.width!==+t.getAttribute("width")?t.rect=t.getBoundingClientRect():t.rect}function xt(t){void 0===t&&(t=!0);var e=Math.random();return t?String(e):e}function vt(t,e,i,n,a){if(i>n)return-1;var r=Math.floor((i+n)/2),s=t[r],o=s.x,c=s.w,l=void 0===c?0:c;return a&&(o=t[r].y,l=t[r].h),e>=o&&e<=o+l?r:e<o?vt(t,e,i,r-1,a):vt(t,e,r+1,n,a)}function _t(t){var e=ft(t);return!e||e[0]===e[1]}function mt(t,e){for(var i in void 0===t&&(t={}),st(e)&&e.forEach((function(e){return mt(t,e)})),e)/^\d+$/.test(i)||i in t||(t[i]=e[i]);return t}var yt=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},bt=function(t){return[].slice.call(t)};var Tt=function(t){var e=t?t.transform:null,i=e&&e.baseVal;return i&&i.numberOfItems?i.getItem(0).matrix:{a:0,b:0,c:0,d:0,e:0,f:0}};function wt(t){var e=t[0]instanceof Date,i=(e?t.map(Number):t).filter((function(t,e,i){return i.indexOf(t)===e}));return e?i.map((function(t){return new Date(t)})):i}function At(t){return t&&t.length?t.reduce((function(t,e){return t.concat(e)})):[]}function kt(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(!e.length||1===e.length&&!e[0])return t;var n=e.shift();return ot(t)&&ot(n)&&Object.keys(n).forEach((function(e){var i=n[e];ot(i)?(!t[e]&&(t[e]={}),t[e]=kt(t[e],i)):t[e]=st(i)?i.concat():i})),kt.apply(void 0,P([t],e))}function Lt(t,e){var i;return void 0===e&&(e=!0),t[0]instanceof Date?i=e?function(t,e){return t-e}:function(t,e){return e-t}:e&&!t.every(isNaN)?i=function(t,e){return t-e}:e||(i=function(t,e){return(t>e?-1:t<e&&1)||t===e&&0}),t.concat().sort(i)}function St(t,e){var i=e.filter((function(t){return rt(t)}));return i.length?J(i[0])?i=Math[t].apply(Math,i):i[0]instanceof Date&&(i=Lt(i,"min"===t)[0]):i=void 0,i}var Ot={mouse:function(){try{return new MouseEvent("t"),function(t,e,i){void 0===i&&(i={bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0}),t.dispatchEvent(new MouseEvent(e,i))}}catch(t){return function(t,e,i){void 0===i&&(i={bubbles:!1,cancelable:!1,screenX:0,screenY:0,clientX:0,clientY:0});var n=G.createEvent("MouseEvent");n.initMouseEvent(e,i.bubbles,i.cancelable,H,0,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}}(),touch:function(t,e,i){var n=new Touch(kt({identifier:Date.now(),target:t,radiusX:2.5,radiusY:2.5,rotationAngle:10,force:.5},i));t.dispatchEvent(new TouchEvent(e,{cancelable:!0,bubbles:!0,shiftKey:!0,touches:[n],targetTouches:[],changedTouches:[n]}))}};function Et(t,e){var i=t;for(var n in e)i=i.replace(new RegExp("{="+n+"}","g"),e[n]);return i}function Ct(t){var e;if(t instanceof Date)e=t;else if(Z(t)){var i=this.config;e=this.format.dataTime(i.data_xFormat)(t)}else J(t)&&!isNaN(t)&&(e=new Date(+t));return e&&!isNaN(+e)||console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),e}function It(){return!G.hidden}var Rt=function(){function t(){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=function(t){if(ot(t)&&t.constructor){var e=new t.constructor;for(var n in t)e[n]=i(t[n]);return e}return t};return t.map((function(t){return i(t)})).reduce((function(t,e){return z(z({},t),e)}))}(M,B,$,Y,N,V,j,t.data)}return t.setOptions=function(t){this.data=t.reduce((function(t,e){return z(z({},t),e)}),this.data)},t.data={},t}(),Xt="__colorPattern__",Dt="$dataMinMax",Ft="$dataTotalSum",zt="$totalPerIndex",Pt="legendItemTextBox",Mt="setOverOut",Bt="callOverOutForTouch",$t="textRect",Yt=function(){function t(){this.cache={}}return t.prototype.add=function(t,e,i){return void 0===i&&(i=!1),this.cache[t]=i?this.cloneTarget(e):e,this.cache[t]},t.prototype.remove=function(t){var e=this;bt(t).forEach((function(t){return delete e.cache[t]}))},t.prototype.get=function(t,e){if(void 0===e&&(e=!1),e){for(var i=[],n=0,a=void 0;a=t[n];n++)a in this.cache&&i.push(this.cloneTarget(this.cache[a]));return i}var r=this.cache[t];return W(r)?r:null},t.prototype.reset=function(t){for(var e in this.cache)(t||/^\$/.test(e))&&(this.cache[e]=null)},t.prototype.cloneTarget=function(t){return{id:t.id,id_org:t.id_org,values:t.values.map((function(t){return{x:t.x,value:t.value,id:t.id}}))}},t}(),Nt=H.setTimeout,Vt=H.clearTimeout;function jt(){var t=[],e=function(e,i){var n;!function e(){for(var a,r=0,s=0;a=t[s];s++)if(!0===a||a.empty&&a.empty())r++;else try{a.transition()}catch(o){r++}n&&Vt(n),r===t.length?i&&i():n=Nt(e,50)}()};return e.add=function(e){st(e)?t=t.concat(e):t.push(e)},e}var Ht={convertData:function(t,e){var i;if(t.bindto?(i={},["url","mimeType","headers","keys","json","keys","rows","columns"].forEach((function(e){var n="data_"+e;n in t&&(i[e]=t[n])}))):i=t,i.url&&e)this.convertUrlToData(i.url,i.mimeType,i.headers,i.keys,e);else if(i.json)i=this.convertJsonToData(i.json,i.keys);else if(i.rows)i=this.convertRowsToData(i.rows);else if(i.columns)i=this.convertColumnsToData(i.columns);else if(t.bindto)throw Error("url or json or rows or columns is required.");return st(i)&&i},convertUrlToData:function(t,e,i,n,a){var r=this;void 0===e&&(e="csv");var s=new XMLHttpRequest;s.open("GET",t),i&&Object.keys(i).forEach((function(t){s.setRequestHeader(t,i[t])})),s.onreadystatechange=function(){if(4===s.readyState){if(200!==s.status)throw new Error(t+": Something went wrong loading!");var i=s.responseText;i&&a.call(r,r["convert"+yt(e)+"ToData"]("json"===e?JSON.parse(i):i,n))}},s.send()},convertCsvTsvToData:function(t,e){var i,n=t.rows(e);return 1===n.length?(i=[{}],n[0].forEach((function(t){i[0][t]=null}))):i=t.parse(e),i},convertCsvToData:function(t){return this.convertCsvTsvToData({rows:u.b,parse:u.a},t)},convertTsvToData:function(t){return this.convertCsvTsvToData({rows:d.b,parse:d.a},t)},convertJsonToData:function(t,e){var i,n,a=this,r=this.config,s=[];if(st(t)){var o=e||r.data_keys;o.x?(i=o.value.concat(o.x),r.data_x=o.x):i=o.value,s.push(i),t.forEach((function(t){var e=i.map((function(e){var i=a.findValueInJson(t,e);return K(i)&&(i=null),i}));s.push(e)})),n=this.convertRowsToData(s)}else Object.keys(t).forEach((function(e){var i=t[e].concat();i.unshift(e),s.push(i)})),n=this.convertColumnsToData(s);return n},findValueInJson:function(t,e){if(void 0!==t[e])return t[e];var i=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),n=t;return i.some((function(t){return!(n=n&&t in n?n[t]:void 0)})),n},convertRowsToData:function(t){var e=t[0],i=[];return t.forEach((function(t,n){if(n>0){var a={};t.forEach((function(t,i){if(K(t))throw new Error("Source data is missing a component at ("+n+", "+i+")!");a[e[i]]=t})),i.push(a)}})),i},convertColumnsToData:function(t){var e=[];return t.forEach((function(t,i){var n=t[0];t.forEach((function(t,a){if(a>0){if(K(e[a-1])&&(e[a-1]={}),K(t))throw new Error("Source data is missing a component at ("+i+", "+a+")!");e[a-1][n]=t}}))})),e},convertDataToTargets:function(t,e){var i=this,n=this,a=n.axis,r=n.config,s=n.state,o=!1,c=!1,l=!1;a&&(o=a.isCategorized(),c=a.isTimeSeries(),l=a.isCustomX());var u,d=Object.keys(t[0]||{}),h=d.length?d.filter(n.isNotX,n):[],g=d.length?d.filter(n.isX,n):[];h.forEach((function(a){var s=i.getXKey(a);l||c?g.indexOf(s)>=0?u=(e&&n.data.xs[a]||[]).concat(t.map((function(t){return t[s]})).filter(W).map((function(t,e){return n.generateTargetX(t,a,e)}))):r.data_x?u=i.getOtherTargetXs():rt(r.data_xs)&&(u=n.getXValuesOfXKey(s,n.data.targets)):u=t.map((function(t,e){return e})),u&&(i.data.xs[a]=u)})),h.forEach((function(t){if(!i.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')}));var f=h.map((function(e,i){var a=r.data_idConverter.bind(n.api)(e),c=n.getXKey(e),u=l&&o,d=u&&t.map((function(t){return t.x})).every((function(t){return r.axis_x_categories.indexOf(t)>-1}));return{id:a,id_org:e,values:t.map((function(t,o){var l,h=t[c],g=t[e];return g=null===g||isNaN(g)||ot(g)?st(g)||ot(g)?g:null:+g,!u&&!s.hasRadar||0!==i||K(h)?l=n.generateTargetX(h,e,o):(d||0!==i||0!==o||(r.axis_x_categories=[]),-1===(l=r.axis_x_categories.indexOf(h))&&(l=r.axis_x_categories.length,r.axis_x_categories.push(h))),(K(g)||n.data.xs[e].length<=o)&&(l=void 0),{x:l,value:g,id:a}})).filter((function(t){return q(t.x)}))}}));return f.forEach((function(t){r.data_xSort&&(t.values=t.values.sort((function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)}))),t.values.forEach((function(t,e){return t.index=e})),n.data.xs[t.id].sort((function(t,e){return t-e}))})),s.hasNegativeValue=n.hasNegativeValueInTargets(f),s.hasPositiveValue=n.hasPositiveValueInTargets(f),r.data_type&&n.setTargetType(n.mapToIds(f).filter((function(t){return!(t in r.data_types)})),r.data_type),f.forEach((function(t){return n.cache.add(t.id_org,t,!0)})),f}},Gt={isX:function(t){var e=this.config,i=e.data_x&&t===e.data_x,n=rt(e.data_xs)&&function(t,e){var i=!1;return Object.keys(t).forEach((function(n){return t[n]===e&&(i=!0)})),i}(e.data_xs,t);return i||n},isNotX:function(t){return!this.isX(t)},isStackNormalized:function(){var t=this.config;return!(!t.data_stack_normalize||!t.data_groups.length)},isGrouped:function(t){var e=this.config.data_groups;return t?e.some((function(e){return e.indexOf(t)>=0&&e.length>1})):e.length>0},getXKey:function(t){var e=this.config;return e.data_x?e.data_x:rt(e.data_xs)?e.data_xs[t]:null},getXValuesOfXKey:function(t,e){var i,n=this;return(e&&rt(e)?n.mapToIds(e):[]).forEach((function(e){n.getXKey(e)===t&&(i=n.data.xs[e])})),i},getIndexByX:function(t,e){return e?e.indexOf(Z(t)?t:+t):(this.filterByX(this.data.targets,t)[0]||{index:null}).index},getXValue:function(t,e){var i=this;return t in i.data.xs&&i.data.xs[t]&&W(i.data.xs[t][e])?i.data.xs[t][e]:e},getOtherTargetXs:function(){var t=Object.keys(this.data.xs);return t.length?this.data.xs[t[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this.config;Object.keys(t).forEach((function(i){e.data_xs[i]=t[i]}))},isMultipleX:function(){return rt(this.config.data_xs)||!this.config.data_xSort||this.hasType("bubble")||this.hasType("scatter")},addName:function(t){var e,i=this.config;return t&&(e=i.data_names[t.id],t.name=void 0!==e?e:t.id),t},getAllValuesOnIndex:function(t,e){void 0===e&&(e=!1);var i=this,n=i.filterTargetsToShow(i.data.targets).map((function(e){return i.addName(i.getValueOnIndex(e.values,t))}));return e&&(n=n.filter((function(t){return W(t.value)}))),n},getValueOnIndex:function(t,e){var i=t.filter((function(t){return t.index===e}));return i.length?i[0]:null},updateTargetX:function(t,e){var i=this;t.forEach((function(t){t.values.forEach((function(n,a){n.x=i.generateTargetX(e[a],t.id,a)})),i.data.xs[t.id]=e}))},updateTargetXs:function(t,e){var i=this;t.forEach((function(t){e[t.id]&&i.updateTargetX([t],e[t.id])}))},generateTargetX:function(t,e,i){var n=this,a=n.axis,r=a&&a.isCategorized()?i:t||i;if(a&&a.isTimeSeries()){var s=Ct.bind(n);r=s(t||n.getXValue(e,i))}else a&&a.isCustomX()&&!a.isCategorized()&&(r=W(t)?+t:n.getXValue(e,i));return r},updateXs:function(t){t.length&&(this.axis.xs=t.map((function(t){return t.x})))},getPrevX:function(t){var e=this.axis.xs[t-1];return q(e)?e:null},getNextX:function(t){var e=this.axis.xs[t+1];return q(e)?e:null},getBaseValue:function(t){var e=this,i=e.state.hasAxis,n=t.value;return n&&i&&(e.isAreaRangeType(t)?n=e.getAreaRangeData(t,"mid"):e.isBubbleZType(t)&&(n=e.getBubbleZData(n,"y"))),n},getMinMaxValue:function(t){var e,i,n=this.getBaseValue.bind(this);return(t||this.data.targets.map((function(t){return t.values}))).forEach((function(t,a){var r=t.map(n).filter(J);e=Math.min.apply(Math,P([a?e:1/0],r)),i=Math.max.apply(Math,P([a?i:-1/0],r))})),{min:e,max:i}},getMinMaxData:function(){var t=this,e=Dt,i=t.cache.get(e);if(!i){var n=t.data.targets.map((function(t){return t.values})),a=t.getMinMaxValue(n),r=[],s=[];n.forEach((function(e){var i=t.getFilteredDataByValue(e,a.min),n=t.getFilteredDataByValue(e,a.max);i.length&&(r=r.concat(i)),n.length&&(s=s.concat(n))})),t.cache.add(e,i={min:r,max:s})}return i},getTotalPerIndex:function(){var t=this,e=zt,i=t.cache.get(e);return t.isStackNormalized()&&!i&&(i=[],t.data.targets.forEach((function(t){t.values.forEach((function(t,e){i[e]||(i[e]=0),i[e]+=J(t.value)?t.value:0}))}))),i},getTotalDataSum:function(t){var e=this,i=Ft,n=e.cache.get(i);if(!J(n)){var a=At(e.data.targets.map((function(t){return t.values}))).map((function(t){return t.value})).reduce((function(t,e){return t+e}));e.cache.add(i,n=a)}return t&&(n-=e.getHiddenTotalDataSum()),n},getHiddenTotalDataSum:function(){var t=this.api,e=this.state.hiddenTargetIds,i=0;return e.length&&(i=t.data.values.bind(t)(e).reduce((function(t,e){return t+e}))),i},getFilteredDataByValue:function(t,e){var i=this;return t.filter((function(t){return i.getBaseValue(t)===e}))},getMaxDataCount:function(){return Math.max.apply(Math,this.data.targets.map((function(t){return t.values.length})))},getMaxDataCountTarget:function(){var t=this.filterTargetsToShow()||[],e=t.length;return e>1?t=Lt(wt(t=t.map((function(t){return t.values})).reduce((function(t,e){return t.concat(e)})).map((function(t){return t.x})))).map((function(t,e){return{x:t,index:e}})):e&&(t=t[0].values),t},mapToIds:function(t){return t.map((function(t){return t.id}))},mapToTargetIds:function(t){return t?st(t)?t.concat():[t]:this.mapToIds(this.data.targets)},hasTarget:function(t,e){for(var i=this.mapToIds(t),n=0,a=void 0;a=i[n];n++)if(a===e)return!0;return!1},isTargetToShow:function(t){return this.state.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.state.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return(t||e.data.targets).filter((function(t){return e.isTargetToShow(t.id)}))},mapTargetsToUniqueXs:function(t){var e=this.axis,i=[];return t&&t.length&&(i=wt(At(t.map((function(t){return t.values.map((function(t){return+t.x}))})))),i=e&&e.isTimeSeries()?i.map((function(t){return new Date(+t)})):i.map((function(t){return+t}))),Lt(i)},addHiddenTargetIds:function(t){this.state.hiddenTargetIds=this.state.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function(t){this.state.hiddenTargetIds=this.state.hiddenTargetIds.filter((function(e){return t.indexOf(e)<0}))},addHiddenLegendIds:function(t){this.state.hiddenLegendIds=this.state.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function(t){this.state.hiddenLegendIds=this.state.hiddenLegendIds.filter((function(e){return t.indexOf(e)<0}))},getValuesAsIdKeyed:function(t){var e=this,i=e.state.hasAxis,n={},a=e.isMultipleX(),r=a?e.mapTargetsToUniqueXs(t).map((function(t){return Z(t)?t:+t})):null;return t.forEach((function(t){var s=[];t.values.forEach((function(t){var n=t.value;st(n)?s.push.apply(s,n):ot(n)&&"high"in n?s.push.apply(s,Object.values(n)):e.isBubbleZType(t)?s.push(i&&e.getBubbleZData(n,"y")):a?s[e.getIndexByX(t.x,r)]=n:s.push(n)})),n[t.id]=s})),n},checkValueInTargets:function(t,e){for(var i,n=Object.keys(t),a=0;a<n.length;a++){i=t[n[a]].values;for(var r=0;r<i.length;r++)if(e(i[r].value))return!0}return!1},hasMultiTargets:function(){return this.filterTargetsToShow().length>1},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,(function(t){return t<0}))},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,(function(t){return t>0}))},_checkOrder:function(t){var e=this.config.data_order;return Z(e)&&e.toLowerCase()===t},isOrderDesc:function(){return this._checkOrder("desc")},isOrderAsc:function(){return this._checkOrder("asc")},orderTargets:function(t){var e=P([],t),i=this.getSortCompareFn();return i&&e.sort(i),e},getSortCompareFn:function(t){void 0===t&&(t=!1);var e,i=this,n=i.config,a=i.isOrderAsc(),r=i.isOrderDesc();return a||r?e=function(e,i){var n=function(t,e){return t+Math.abs(e.value)},r=e.values.reduce(n,0),s=i.values.reduce(n,0);return t?a?r-s:s-r:a?s-r:r-s}:U(n.data_order)&&(e=n.data_order.bind(i.api)),e||null},filterByX:function(t,e){return At(t.map((function(t){return t.values}))).filter((function(t){return t.x-e===0}))},filterRemoveNull:function(t){var e=this;return t.filter((function(t){return W(e.getBaseValue(t))}))},filterByXDomain:function(t,e){return t.map((function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter((function(t){return e[0]<=t.x&&t.x<=e[1]}))}}))},hasDataLabel:function(){var t=this.config.data_labels;return Q(t)&&t||nt(t)&&rt(t)},getDataIndexFromEvent:function(t){var e=this.config,i=this.state,n=i.inputType,a=i.eventReceiver,r=a.coords,s=a.rect,o=e.axis_rotated,c="touch"===n&&t.changedTouches?t.changedTouches[0]:t;return vt(r,o?c.clientY-s.top:c.clientX-s.left,0,r.length-1,o)},getDataLabelLength:function(t,e,i){var n=this,a=[0,0];return n.$el.chart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text((function(t){return n.dataLabelFormat(t.id)(t)})).each((function(t,e){a[e]=1.3*this.getBoundingClientRect()[i]})).remove(),a},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var i,n=t[e].x,a=[];for(i=e-1;i>=0&&n===t[i].x;i--)a.push(t[i]);for(i=e;i<t.length&&n===t[i].x;i++)a.push(t[i]);return a},findClosestFromTargets:function(t,e){var i=this,n=t.map((function(t){return i.findClosest(t.values,e)}));return i.findClosest(n,e)},findClosest:function(t,e){var i,n=this,a=n.config,r=n.$el.main,s=t.filter((function(t){return t&&W(t.value)})),o=a.point_sensitivity;return s.filter((function(t){return n.isBarType(t.id)})).forEach((function(t){var e=r.select("."+X.bars+n.getTargetSelectorSuffix(t.id)+" ."+X.bar+"-"+t.index).node();!i&&n.isWithinBar(e)&&(i=t)})),s.filter((function(t){return!n.isBarType(t.id)})).forEach((function(t){var a=n.dist(t,e);a<o&&(o=a,i=t)})),i},dist:function(t,e){var i=this,n=i.config.axis_rotated,a=i.scale,r=n?1:0,s=n?0:1,o=i.circleY(t,t.index),c=(a.zoom||a.x)(t.x);return Math.sqrt(Math.pow(c-e[r],2)+Math.pow(o-e[s],2))},convertValuesToStep:function(t){var e=this.axis,i=this.config.line_step_type,n=!!e&&e.isCategorized(),a=st(t)?t.concat():[t];if(!n&&!/step\-(after|before)/.test(i))return t;var r=a[0],s=a[a.length-1],o=r.id,c=r.x;return a.unshift({x:--c,value:r.value,id:o}),n&&"step-after"===i&&a.unshift({x:--c,value:r.value,id:o}),c=s.x,a.push({x:++c,value:s.value,id:o}),n&&"step-before"===i&&a.push({x:++c,value:s.value,id:o}),a},convertValuesToRange:function(t){var e=st(t)?t.concat():[t],i=[];return e.forEach((function(t){var e=t.x,n=t.id;i.push({x:e,id:n,value:t.value[0]}),i.push({x:e,id:n,value:t.value[2]})})),i},updateDataAttributes:function(t,e){var i=this.config["data_"+t];return K(e)||(Object.keys(e).forEach((function(t){i[t]=e[t]})),this.redraw({withLegend:!0})),i},getAreaRangeData:function(t,e){var i=t.value;if(st(i)){var n=["high","mid","low"].indexOf(e);return-1===n?null:i[n]}return i[e]},getRatio:function(t,e,i){var n=this,a=n.config,r=n.state,s=n.api,o=0;if(e&&s.data.shown().length)if(o=e.ratio||e.value,"arc"===t)if(n.pie.padAngle()())o=e.value/n.getTotalDataSum(!0);else{var c=a.gauge_fullCircle?n.getArcLength():-2*n.getStartAngle(),l=n.hasType("gauge")?c:2*Math.PI;o=(e.endAngle-e.startAngle)/l}else if("index"===t){var u=s.data.values.bind(s),d=this.getTotalPerIndex();if(r.hiddenTargetIds.length){var h=u(r.hiddenTargetIds,!1);h.length&&(h=h.reduce((function(t,e){return t.map((function(t,i){return(J(t)?t:0)+e[i]}))})),d=d.map((function(t,e){return t-h[e]})))}e.ratio=J(e.value)&&d&&d[e.index]>0?e.value/d[e.index]:0,o=e.ratio}else if("radar"===t)o=parseFloat(String(Math.max(e.value,0)))/r.current.dataMax*a.radar_size_ratio;else if("bar"===t){var g=n.getYScaleById.bind(n)(e.id).domain().reduce((function(t,e){return e-t}));o=Math.abs(e.value)/g}return i&&o?100*o:o},updateDataIndexByX:function(t){var e=t.reduce((function(t,e,i){return t[Number(e.x)]=i,t}),{});this.data.targets.forEach((function(t){t.values.forEach((function(t,i){var n=e[Number(t.x)];void 0===n&&(n=i),t.index=n}))}))},isBubbleZType:function(t){return this.isBubbleType(t)&&(ot(t.value)&&("z"in t.value||"y"in t.value)||st(t.value)&&2===t.value.length)},getDataById:function(t){var e=this.cache.get(t)||this.api.data(t);return st(e)?e[0]:e}},Wt={load:function(t,e){var i=this,n=t;n&&(e.filter&&(n=n.filter(e.filter)),(e.type||e.types)&&n.forEach((function(t){var n=e.types&&e.types[t.id]||e.type;i.setTargetType(t.id,n)})),i.data.targets.forEach((function(t){for(var e=0;e<n.length;e++)if(t.id===n[e].id){t.values=n[e].values,n.splice(e,1);break}})),i.data.targets=i.data.targets.concat(n)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.updateTypesElements(),e.done&&e.done.call(i.api)},loadFromArgs:function(t){var e=this;if(e.config){e.cache.reset();var i=t.data||e.convertData(t,(function(i){return e.load(e.convertDataToTargets(i),t)}));i&&e.load(e.convertDataToTargets(i),t)}},unload:function(t,e){var i=this,n=i.state,a=i.$el,r=e,s=t;i.cache.reset(),r||(r=function(){}),(s=s.filter((function(t){return i.hasTarget(i.data.targets,t)})))&&0!==s.length?(a.svg.selectAll(s.map((function(t){return i.selectorTarget(t)}))).transition().style("opacity","0").remove().call(ut,r),s.forEach((function(t){n.withoutFadeIn[t]=!1,a.legend&&a.legend.selectAll("."+X.legendItem+i.getTargetSelectorSuffix(t)).remove(),i.data.targets=i.data.targets.filter((function(e){return e.id!==t}))})),i.updateTypesElements()):r()}},Ut={selectRectForSingle:function(t,e,i){var n=this,a=n.config,s=n.$el.main,o=a.data_selection_enabled,c=a.data_selection_grouped,l=a.data_selection_isselectable,u=a.tooltip_grouped,d=n.getAllValuesOnIndex(i);u&&(n.showTooltip(d,t),n.showGridFocus&&n.showGridFocus(d),!o||c)||s.selectAll("."+X.shape+"-"+i).each((function(){Object(r.a)(this).classed(X.EXPANDED,!0),o&&e.style("cursor",c?"pointer":null),u||(n.hideGridFocus&&n.hideGridFocus(),n.hideTooltip(),!c&&n.expandCirclesBars(i))})).filter((function(t){return n.isWithinShape(this,t)})).call((function(a){var r=a.data();o&&(c||l&&l.bind(n.api)(r))&&e.style("cursor","pointer"),u||(n.showTooltip(r,t),n.showGridFocus&&n.showGridFocus(r),n.unexpandCircles&&n.unexpandCircles(),a.each((function(t){return n.expandCirclesBars(i,t.id)})))}))},expandCirclesBars:function(t,e,i){var n=this,a=n.config,r=n.$el,s=r.bar;r.circle&&a.point_focus_expand_enabled&&n.expandCircles(t,e,i),s&&n.expandBars(t,e,i)},setOverOut:function(t,e){var i=this,n=i.config,a=i.state.hasRadar,s=i.$el.main,o=ot(e);if(o||-1!==e){var c=n[t?"data_onover":"data_onout"].bind(i.api);if(n.color_onover&&i.setOverColor(t,e,o),o)c(e,s.select("."+X.arc+i.getTargetSelectorSuffix(e.id)).node());else if(n.tooltip_grouped)t&&(n.point_focus_only&&a?i.showCircleFocus(i.getAllValuesOnIndex(e,!0)):i.expandCirclesBars(e,null,!0)),!i.isMultipleX()&&s.selectAll("."+X.shape+"-"+e).each((function(t){c(t,this)}));else{var l=i.cache.get(Mt)||[],u=s.selectAll("."+X.shape+"-"+e).filter((function(t){return i.isWithinShape(this,t)}));u.each((function(t){var e=this;(0===l.length||l.every((function(t){return t!==e})))&&(c(t,this),l.push(this))})),l.length>0&&u.empty()&&(c=n.data_onout.bind(i.api),l.forEach((function(t){return c(Object(r.a)(t).datum(),t)})),l=[]),i.cache.add(Mt,l)}}},callOverOutForTouch:function(t){var e=this,i=e.cache.get(Bt);(ot(t)&&i?t.id!==i.id:t!==i)&&((i||J(i))&&e.setOverOut(!1,i),(t||J(t))&&e.setOverOut(!0,t),e.cache.add(Bt,t))},getDraggableSelection:function(){var t=this,e=t.config;return e.interaction_enabled&&e.data_selection_draggable&&t.drag?Object(h.a)().on("drag",(function(){t.drag(Object(s.a)(this))})).on("start",(function(){t.dragstart(Object(s.a)(this))})).on("end",(function(){t.dragend()})):function(){}},dispatchEvent:function(t,e,i){var n=this,a=n.config,r=n.state,s=r.eventReceiver,o=r.hasAxis,c=r.hasRadar,l=n.$el,u=l.eventRect,d=l.arcs,h=l.radar,g=n.isMultipleX(),f=(c?h.axes.select("."+X.axis+"-"+e+" text"):u||d.selectAll("."+X.target+" path").filter((function(t,i){return i===e}))).node(),p=f.getBoundingClientRect(),x=p.width,v=p.left,_=p.top;if(o&&!c&&!g){var m=s.coords[e];x=m.w,v+=m.x,_+=m.y}var y=v+(i?i[0]:0)+(g||a.axis_rotated?0:x/2),b=_+(i?i[1]:0),T={screenX:y,screenY:b,clientX:y,clientY:b};Ot[/^(mouse|click)/.test(t)?"mouse":"touch"](f,t,T)},setDragStatus:function(t){this.state.dragging=t}},Zt={generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},getClass:function(t,e){var i=this,n=/s$/.test(t),a=/^(area|arc|line)s?$/.test(t),r=n?"id":"index";return function(s){var o=s.data||s;return(e?i.generateClass(X[n?"shapes":"shape"],o[r]):"")+i.generateClass(X[t],o[a?"id":r])}},getChartClass:function(t){var e=this;return function(i){return X["chart"+t]+e.classTarget((i.data?i.data:i).id)}},generateExtraLineClass:function(){var t=this.config.line_classes||[],e=[];return function(i){var n=i.id||i.data&&i.data.id||i;return e.indexOf(n)<0&&e.push(n),t[e.indexOf(n)%t.length]}},classRegion:function(t,e){return this.generateClass(X.region,e)+" "+("class"in t?t.class:"")},classTarget:function(t){var e=this.config.data_classes[t],i="";return e&&(i=" "+X.target+"-"+e),this.generateClass(X.target,t)+i},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(this.state.focusedTargetIds.indexOf(t.id)>=0?X.focused:"")},classDefocused:function(t){return" "+(this.state.defocusedTargetIds.indexOf(t.id)>=0?X.defocused:"")},getTargetSelectorSuffix:function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function(t,e){var i=e||"",n=this.getTargetSelectorSuffix(t);return i+"."+(X.target+n)+", "+i+"."+(X.circles+n)},selectorTargets:function(t,e){var i=this,n=t||[];return n.length?n.map((function(t){return i.selectorTarget(t,e)})):null},selectorLegend:function(t){return"."+(X.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return t&&t.length?t.map((function(t){return e.selectorLegend(t)})):null}},Jt=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Kt={getColorFromCss:function(){var t=Xt,e=G.body,i=e[t];if(!i){var n=G.createElement("span");n.className=X.colorPattern,n.style.display="none",e.appendChild(n);var a=H.getComputedStyle(n).backgroundImage;n.parentNode.removeChild(n),a.indexOf(";")>-1&&(i=a.replace(/url[^#]*|["'()]|(\s|%20)/g,"").split(";").map((function(t){return t.trim().replace(/[\"'\s]/g,"")})).filter(Boolean),e[t]=i)}return i},generateColor:function(){var t=this,e=t.config,i=e.data_colors,n=e.data_color,a=[],s=rt(e.color_pattern)?e.color_pattern:Object(g.c)(t.getColorFromCss()||Jt).range(),o=s;if(U(e.color_tiles)){var c=e.color_tiles.bind(t.api)(),l=s.map((function(e,i){var n=e.replace(/[#\(\)\s,]/g,""),a=t.state.datetimeId+"-pattern-"+n+"-"+i;return function(t,e,i){var n=Object(r.a)(t.cloneNode(!0));return n.attr("id",i).insert("rect",":first-child").attr("width",n.attr("width")).attr("height",n.attr("height")).style("fill",e),{id:i,node:n.node()}}(c[i%c.length],e,a)}));s=l.map((function(t){return"url(#"+t.id+")"})),t.patterns=l}return function(r){var c,l=r.id||r.data&&r.data.id||r,u=t.isTypeOf(l,["line","spline","step"])||!e.data_types[l];return U(i[l])?c=i[l].bind(t.api)(r):i[l]?c=i[l]:(a.indexOf(l)<0&&a.push(l),c=u?o[a.indexOf(l)%o.length]:s[a.indexOf(l)%s.length],i[l]=c),U(n)?n.bind(t.api)(c,r):c}},generateLevelColor:function(){var t=this.config,e=t.color_pattern,i=t.color_threshold,n="value"===i.unit,a=i.max||100,r=i.values&&i.values.length?i.values:[];return rt(i)?function(t){for(var i=n?t:100*t/a,s=e[e.length-1],o=0,c=r.length;o<c;o++)if(i<=r[o]){s=e[o];break}return s}:null},setOverColor:function(t,e){var i=this,n=i.config,a=i.$el.main,r=n.color_onover,s=t?r:i.color;ot(s)?s=function(t){var e=t.id;return e in r?r[e]:i.color(e)}:Z(s)?s=function(){return r}:U(r)&&(s=s.bind(i.api)),a.selectAll(ot(e)?"."+X.arc+i.getTargetSelectorSuffix(e.id):"."+X.shape+"-"+e).style("fill",s)}},qt={AREA:"area",AREA_LINE_RANGE:"area-line-range",AREA_SPLINE:"area-spline",AREA_SPLINE_RANGE:"area-spline-range",AREA_STEP:"area-step",BAR:"bar",BUBBLE:"bubble",DONUT:"donut",GAUGE:"gauge",LINE:"line",PIE:"pie",RADAR:"radar",SCATTER:"scatter",SPLINE:"spline",STEP:"step"},Qt={Area:[qt.AREA,qt.AREA_SPLINE,qt.AREA_SPLINE_RANGE,qt.AREA_LINE_RANGE,qt.AREA_STEP],AreaRange:[qt.AREA_SPLINE_RANGE,qt.AREA_LINE_RANGE],Arc:[qt.PIE,qt.DONUT,qt.GAUGE,qt.RADAR],Line:[qt.LINE,qt.SPLINE,qt.AREA,qt.AREA_SPLINE,qt.AREA_SPLINE_RANGE,qt.AREA_LINE_RANGE,qt.STEP,qt.AREA_STEP],Step:[qt.STEP,qt.AREA_STEP],Spline:[qt.SPLINE,qt.AREA_SPLINE,qt.AREA_SPLINE_RANGE]},te={getYDomainMinMax:function(t,e){var i=this,n=i.axis,a=i.config,r="min"===e,s=a.data_groups,o=i.mapToIds(t),c=i.getValuesAsIdKeyed(t);if(s.length>0)for(var l,u=i["has"+(r?"Negative":"Positive")+"ValueInTargets"](t),d=function(t,e){if(0===(e=e.filter((function(t){return o.indexOf(t)>=0}))).length)return l=e,"continue";var i=e[0],a=n.getId(i);u&&c[i]&&(c[i]=c[i].map((function(t){return(r?t<0:t>0)?t:0})));for(var s=function(t,e){if(!c[e])return"continue";var s=n.getId(e);c[e].forEach((function(t,e){var n=+t;s!==a||u&&(r?n>0:n<0)||(c[i][e]+=n)}))},d=1,h=void 0;h=e[d];d++)s(0,h);l=e},h=0,g=void 0;g=s[h];h++)d(0,g),g=l;return St(e,Object.keys(c).map((function(t){return St(e,c[t])})))},getYDomainMin:function(t){return this.getYDomainMinMax(t,"min")},getYDomainMax:function(t){return this.getYDomainMinMax(t,"max")},isHiddenTargetWithYDomain:function(t){var e=this;return e.state.hiddenTargetIds.some((function(i){return e.axis.getId(i)===t}))},getYDomain:function(t,e,i){var n=this,a=n.axis,r=n.config,s=n.scale,o="axis_"+e;if(n.isStackNormalized())return[0,100];var c=s&&s[e]&&"log"===s[e].type,l=t.filter((function(t){return a.getId(t.id)===e})),u=i?n.filterByXDomain(l,i):l;if(0===u.length)return n.isHiddenTargetWithYDomain(e)?s[e].domain():"y2"===e?s.y.domain():n.getYDomain(t,"y2",i);var d=r[o+"_min"],h=r[o+"_max"],g=n.getYDomainMin(u),f=n.getYDomainMax(u),p=r[o+"_center"],x=P([qt.BAR,qt.BUBBLE,qt.SCATTER],Qt.Line).some((function(t){var e=t.indexOf("area")>-1?"area":t;return n.hasType(t,u)&&r[e+"_zerobased"]})),v=r[o+"_inverted"],_=n.hasDataLabel()&&r.axis_rotated,m=n.hasDataLabel()&&!r.axis_rotated;g=W(d)?d:W(h)?g<h?g:h-10:g,f=W(h)?h:W(d)?d<f?f:d+10:f,isNaN(g)&&(g=0),isNaN(f)&&(f=g),g===f&&(g<0?f=0:g=0);var y=g>=0&&f>=0,b=g<=0&&f<=0;(W(d)&&y||W(h)&&b)&&(x=!1),x&&(y&&(g=0),b&&(f=0));var T=Math.abs(f-g),w={top:.1*T,bottom:.1*T};if(q(p)){var A=Math.max(Math.abs(g),Math.abs(f));f=p+A,g=p-A}if(_){var k=it(s.y.range()),L=n.getDataLabelLength(g,f,"width").map((function(t){return t/k}));["bottom","top"].forEach((function(t,e){w[t]+=T*(L[e]/(1-L[0]-L[1]))}))}else if(m){var S=n.getDataLabelLength(g,f,"height");["bottom","top"].forEach((function(t,e){w[t]+=a.convertPixelsToAxisPadding(S[e],T)}))}var O=r[o+"_padding"];rt(O)&&["bottom","top"].forEach((function(t){w[t]=a.getPadding(O,t,w[t],T)})),x&&(y&&(w.bottom=g),b&&(w.top=-f));var E=c?[g,f].map((function(t){return t<0?0:t})):[g-w.bottom,f+w.top];return v?E.reverse():E},getXDomainMinMax:function(t,e){var i=this.config["axis_x_"+e],n=St(e,t.map((function(t){return St(e,t.values.map((function(t){return t.x})))}))),a=ot(i)?i.value:i;return a=q(a)&&this.axis.isTimeSeries()?Ct(a):a,ot(i)&&i.fit&&("min"===e&&a<n||"max"===e&&a>n)&&(a=void 0),q(a)?a:n},getXDomainMin:function(t){return this.getXDomainMinMax(t,"min")},getXDomainMax:function(t){return this.getXDomainMinMax(t,"max")},getXDomainPadding:function(t){var e,i,n=this,a=n.axis,r=n.config,s=t[1]-t[0],o=r.axis_x_padding,c=i=a.isCategorized()?0:n.hasType("bar")?(e=n.getMaxDataCount())>1?s/(e-1)/2:.5:.01*s,l=i;return ot(o)&&rt(o)?(c=W(o.left)?o.left:i,l=W(o.right)?o.right:i):J(r.axis_x_padding)&&(c=o,l=o),{left:c,right:l}},getXDomain:function(t){var e=this,i="log"===e.scale.x.type,n=[e.getXDomainMin(t),e.getXDomainMax(t)],a=0,r=0;if(i)a=n[0],r=n[1];else{var s=e.axis.isCategorized(),o=e.axis.isTimeSeries(),c=e.getXDomainPadding(n),l=n[0],u=n[1];l-u!==0||s||(o?(l=new Date(.5*l.getTime()),u=new Date(1.5*u.getTime())):(l=0===l?1:.5*l,u=0===u?-1:1.5*u)),(l||0===l)&&(a=o?new Date(l.getTime()-c.left):l-c.left),(u||0===u)&&(r=o?new Date(u.getTime()+c.right):u+c.right)}return[a,r]},updateXDomain:function(t,e,i,n,a){var r=this,s=r.config,o=r.org,c=r.scale,l=c.x,u=c.subX,d=s.zoom_enabled;if(i&&(l.domain(a||Lt(r.getXDomain(t))),o.xDomain=l.domain(),d&&r.zoom.updateScaleExtent(),u.domain(l.domain()),r.brush&&r.brush.scale(u)),e){var h=a||!r.brush||_t(r)?o.xDomain:ft(r).map(u.invert);l.domain(h),d&&r.zoom.updateScaleExtent()}return n&&l.domain(r.trimXDomain(l.orgDomain())),l.domain()},trimXDomain:function(t){var e=this.getZoomDomain(),i=e[0],n=e[1];return t[0]<=i&&(t[1]=+t[1]+(i-t[0]),t[0]=i),n<=t[1]&&(t[0]=+t[0]-(t[1]-n),t[1]=n),t},getZoomDomain:function(){var t=this.config,e=this.org.xDomain,i=e[0],n=e[1];return q(t.zoom_x_min)&&(i=St("min",[i,t.zoom_x_min])),q(t.zoom_x_max)&&(n=St("max",[n,t.zoom_x_max])),[i,n]}};function ee(t,e,i){var n=t.config,a="axis_"+e+"_tick_format";return(n[a]?n[a]:t.defaultValueFormat)(i)}var ie={getYFormat:function(t){var e=this,i=e.yFormat,n=e.y2Format;return t&&!e.hasType("gauge")&&(i=e.defaultArcValueFormat,n=e.defaultArcValueFormat),function(t,a,r){return(e.axis&&"y2"===e.axis.getId(r)?n:i).call(e,t,a)}},yFormat:function(t){return ee(this,"y",t)},y2Format:function(t){return ee(this,"y2",t)},defaultValueFormat:function(t){return W(t)?+t:""},defaultArcValueFormat:function(t,e){return(100*e).toFixed(1)+"%"},dataLabelFormat:function(t){var e=this.config.data_labels,i=function(t){return W(t)?+t:""},n=i;return U(e.format)?n=e.format:nt(e.format)&&(n=e.format[t]?!0===e.format[t]?i:e.format[t]:function(){return""}),n.bind(this.api)}},ne={initLegend:function(){var t=this,e=t.config,i=t.$el;t.legendItemTextBox={},t.state.legendHasRendered=!1,e.legend_show?(e.legend_contents_bindto||(i.legend=t.$el.svg.append("g").classed(X.legend,!0).attr("transform",t.getTranslate("legend"))),t.updateLegend()):t.state.hiddenLegendIds=t.mapToIds(t.data.targets)},updateLegend:function(t,e,i){var n=this,a=n.config,r=n.state,s=n.scale,o=n.$el,c=e||{withTransform:!1,withTransitionForTransform:!1,withTransition:!1};c.withTransition=ct(c,"withTransition",!0),c.withTransitionForTransform=ct(c,"withTransitionForTransform",!0),a.legend_contents_bindto&&a.legend_contents_template?n.updateLegendTemplate():n.updateLegendElement(t||n.mapToIds(n.data.targets),c,i),o.legend.selectAll("."+X.legendItem).classed(X.legendItemHidden,(function(t){var e=!n.isTargetToShow(t);return e&&(this.style.opacity=null),e})),n.updateScales(!1,!s.zoom),n.updateSvgSize(),n.transformAll(c.withTransitionForTransform,i),r.legendHasRendered=!0},updateLegendTemplate:function(){var t=this,e=t.config,i=t.$el,n=Object(r.a)(e.legend_contents_bindto),a=e.legend_contents_template;if(!n.empty()){var s=t.mapToIds(t.data.targets),o=[],c="";s.forEach((function(e){var i=U(a)?a.bind(t.api)(e,t.color(e),t.api.data(e)[0].values):Et(a,{COLOR:t.color(e),TITLE:e});i&&(o.push(e),c+=i)}));var l=n.html(c).selectAll((function(){return this.childNodes})).data(o);t.setLegendItem(l),i.legend=n}},updateSizeForLegend:function(t){var e=this,i=e.config,n=e.state,a=n.isLegendTop,r=n.isLegendLeft,s=n.isLegendRight,o=n.isLegendInset,c=n.current,l=t.width,u=t.height,d={top:a?e.getCurrentPaddingTop()+i.legend_inset_y+5.5:c.height-u-e.getCurrentPaddingBottom()-i.legend_inset_y,left:r?e.getCurrentPaddingLeft()+i.legend_inset_x+.5:c.width-l-e.getCurrentPaddingRight()-i.legend_inset_x+.5};e.state.margin3={top:s?0:o?d.top:c.height-u,right:NaN,bottom:0,left:s?c.width-l:o?d.left:0}},transformLegend:function(t){var e=this.$el.legend;(t?e.transition():e).attr("transform",this.getTranslate("legend"))},updateLegendStep:function(t){this.state.legendStep=t},updateLegendItemWidth:function(t){this.state.legendItemWidth=t},updateLegendItemHeight:function(t){this.state.legendItemHeight=t},updateLegendItemColor:function(t,e){var i=this.$el.legend;i&&i.select("."+X.legendItem+"-"+t+" line").style("stroke",e)},getLegendWidth:function(){var t=this.state,e=t.current.width,i=t.isLegendRight,n=t.isLegendInset,a=t.legendItemWidth,r=t.legendStep;return this.config.legend_show?i||n?a*(r+1):e:0},getLegendHeight:function(){var t=this.state,e=t.current,i=t.isLegendRight,n=t.legendItemHeight,a=t.legendStep;return this.config.legend_show?i?e.height:Math.max(20,n)*(a+1):0},opacityForLegend:function(t){return t.classed(X.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function(t){return t.classed(X.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var i=this,n=i.$el.legend,a=i.mapToTargetIds(t);n&&n.selectAll("."+X.legendItem).filter((function(t){return a.indexOf(t)>=0})).classed(X.legendItemFocused,e).transition().duration(100).style("opacity",(function(){return(e?i.opacityForLegend:i.opacityForUnfocusedLegend).call(i,Object(r.a)(this))}))},revertLegend:function(){var t=this,e=t.$el.legend;e&&e.selectAll("."+X.legendItem).classed(X.legendItemFocused,!1).transition().duration(100).style("opacity",(function(){return t.opacityForLegend(Object(r.a)(this))}))},showLegend:function(t){var e=this,i=e.config,n=e.$el;i.legend_show||(i.legend_show=!0,n.legend?n.legend.style("visibility","visible"):e.initLegend(),!e.state.legendHasRendered&&e.updateLegend()),e.removeHiddenLegendIds(t),n.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",(function(){return e.opacityForLegend(Object(r.a)(this))}))},hideLegend:function(t){var e=this,i=e.config,n=e.$el.legend;i.legend_show&&at(t)&&(i.legend_show=!1,n.style("visibility","hidden")),e.addHiddenLegendIds(t),n.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},getLegendItemTextBox:function(t,e){var i,n=this,a=n.cache,r=n.state,s=Pt;return t&&((i=!r.redrawing&&a.get(s)||{})[t]||(i[t]=n.getTextRect(e,X.legendItem),a.add(s,i)),i=i[t]),i},setLegendItem:function(t){var e=this,i=e.api,n=e.config,s=e.state,o="touch"===s.inputType,c=e.hasType("gauge");t.attr("class",(function(t){var i=Object(r.a)(this);return(!i.empty()&&i.attr("class")||"")+e.generateClass(X.legendItem,t)})).style("visibility",(function(t){return e.isLegendToShow(t)?"visible":"hidden"})),n.interaction_enabled&&(t.style("cursor","pointer").on("click",(function(t){lt(n.legend_item_onclick,i,t)||(a.c.altKey?(i.hide(),i.show(t)):(i.toggle(t),Object(r.a)(this).classed(X.legendItemFocused,!1).style("opacity",null))),o&&e.hideTooltip()})),!o&&t.on("mouseout",(function(t){lt(n.legend_item_onout,i,t)||(Object(r.a)(this).classed(X.legendItemFocused,!1),c&&e.undoMarkOverlapped(e,"."+X.gaugeValue),e.api.revert())})).on("mouseover",(function(t){lt(n.legend_item_onover,i,t)||(Object(r.a)(this).classed(X.legendItemFocused,!0),c&&e.markOverlapped(t,e,"."+X.gaugeValue),!s.transiting&&e.isTargetToShow(t)&&i.focus(t))})))},updateLegendElement:function(t,e){var i,n,a,s=this,c=s.config,l=s.state,u=s.$el.legend,d=c.legend_item_tile_width+5,h=0,g=0,f=0,p={},x={},v={},_=[0],m={},y=0,b=l.isLegendRight||l.isLegendInset,T=t.filter((function(t){return!q(c.data_names[t])||null!==c.data_names[t]})),w=e.withTransition,A=function(t,e,i){var n,a=0===i,r=i===T.length-1,o=s.getLegendItemTextBox(e,t),u=o.width+d+(r&&!b?0:10)+c.legend_padding,w=o.height+4,A=b?w:u,k=b?s.getLegendHeight():s.getLegendWidth(),L=function(t,e){e||(n=(k-f-A)/2)<10&&(n=(k-A)/2,f=0,y++),m[t]=y,_[y]=l.isLegendInset?10:n,p[t]=f,f+=A};if(a&&(f=0,y=0,h=0,g=0),c.legend_show&&!s.isLegendToShow(e))return x[e]=0,v[e]=0,m[e]=0,void(p[e]=0);x[e]=u,v[e]=w,(!h||u>=h)&&(h=u),(!g||w>=g)&&(g=w);var S=b?g:h;c.legend_equally?(Object.keys(x).forEach((function(t){return x[t]=h})),Object.keys(v).forEach((function(t){return v[t]=g})),(n=(k-S*T.length)/2)<10?(f=0,y=0,T.forEach((function(t){return L(t)}))):L(e,!0)):L(e)};l.isLegendInset&&(y=c.legend_inset_step?c.legend_inset_step:T.length,s.updateLegendStep(y)),l.isLegendRight?(i=function(t){return h*m[t]},n=function(t){return _[m[t]]+p[t]}):l.isLegendInset?(i=function(t){return h*m[t]+10},n=function(t){return _[m[t]]+p[t]}):(i=function(t){return _[m[t]]+p[t]},n=function(t){return g*m[t]});var k=function(t,e){return i(t,e)+4+c.legend_item_tile_width},L=function(t,e){return i(t,e)},S=function(t,e){return i(t,e)-2},O=function(t,e){return i(t,e)-2+c.legend_item_tile_width},E=function(t,e){return n(t,e)+9},C=function(t,e){return n(t,e)-5},I=function(t,e){return n(t,e)+4},R=-200,D=u.selectAll("."+X.legendItem).data(T).enter().append("g");s.setLegendItem(D),D.append("text").text((function(t){return q(c.data_names[t])?c.data_names[t]:t})).each((function(t,e){A(this,t,e)})).style("pointer-events","none").attr("x",b?k:R).attr("y",b?R:E),D.append("rect").attr("class",X.legendItemEvent).style("fill-opacity","0").attr("x",b?L:R).attr("y",b?R:C);var F=function(t){var e=s.getDataById(t);return s.levelColor?s.levelColor(e.values[0].value):s.color(e)},z=c.legend_usePoint;if(z){var P=[];D.append((function(t){var e=rt(c.point_pattern)?c.point_pattern:[c.point_type];-1===P.indexOf(t)&&P.push(t);var i=e[P.indexOf(t)%e.length];return"rectangle"===i&&(i="rect"),G.createElementNS(o.a.svg,"hasValidPointType"in s&&s.hasValidPointType(i)?i:"use")})).attr("class",X.legendItemPoint).style("fill",F).style("pointer-events","none").attr("href",(function(t,e,i){return"use"===i[e].nodeName.toLowerCase()?"#"+l.datetimeId+"-point-"+t:void 0}))}else D.append("line").attr("class",X.legendItemTile).style("stroke",F).style("pointer-events","none").attr("x1",b?S:R).attr("y1",b?R:I).attr("x2",b?O:R).attr("y2",b?R:I).attr("stroke-width",c.legend_item_tile_height);a=u.select("."+X.legendBackground+" rect"),l.isLegendInset&&h>0&&0===a.size()&&(a=u.insert("g","."+X.legendItem).attr("class",X.legendBackground).append("rect"));var M=u.selectAll("text").data(T).text((function(t){return q(c.data_names[t])?c.data_names[t]:t})).each((function(t,e){A(this,t,e)}));(w?M.transition():M).attr("x",k).attr("y",E);var B=u.selectAll("rect."+X.legendItemEvent).data(T);if((w?B.transition():B).attr("width",(function(t){return x[t]})).attr("height",(function(t){return v[t]})).attr("x",L).attr("y",C),z){var $=u.selectAll("."+X.legendItemPoint).data(T);(w?$.transition():$).each((function(){var t,e,i,n=this.nodeName.toLowerCase(),a=c.point_r,s="x",o="y",l=2,u=2.5;if("circle"===n)s="cx",o="cy",t=a+(d=.2*a),l=2*a,u=-d;else if("rect"===n){var d;e=d=2.5*a,i=d,u=3}Object(r.a)(this).attr(s,(function(t){return S(t)+l})).attr(o,(function(t){return I(t)-u})).attr("r",t).attr("width",e).attr("height",i)}))}else{$=u.selectAll("line."+X.legendItemTile).data(T);(w?$.transition():$).style("stroke",F).attr("x1",S).attr("y1",I).attr("x2",O).attr("y2",I)}a&&(w?a.transition():a).attr("height",s.getLegendHeight()-12).attr("width",h*(y+1)+10),s.updateLegendItemWidth(h),s.updateLegendItemHeight(g),s.updateLegendStep(y)}},ae={redraw:function(t){void 0===t&&(t={});var e=this,i=e.config,n=e.state,a=e.$el,r=a.main;n.redrawing=!0;var s=e.filterTargetsToShow(e.data.targets),o=t.initializing,c=t.flow,l=e.getWithOption(t),u=l.Transition?i.transition_duration:0,d=l.TransitionForExit?u:0,h=l.TransitionForAxis?u:0,g=e.axis&&e.axis.generateTransitions(h);e.updateSizes(o),l.Legend&&i.legend_show?(t.withTransition=!!u,e.updateLegend(e.mapToIds(e.data.targets),t,g)):l.Dimension&&e.updateDimension(!0),e.hasArcType()&&!n.hasRadar||e.updateCircleY&&e.updateCircleY(),n.hasAxis?(e.axis.redrawAxis(s,l,g,c,o),i.data_empty_label_text&&r.select("text."+X.text+"."+X.empty).attr("x",n.width/2).attr("y",n.height/2).text(i.data_empty_label_text).style("display",s.length?"none":null),e.hasGrid()&&e.updateGrid(u),i.regions.length&&e.updateRegion(u),e.hasType("bar")&&e.updateBar(d),e.hasTypeOf("Line")&&e.updateLine(d),e.hasTypeOf("Area")&&e.updateArea(d),a.text&&r.selectAll("."+X.selectedCircles).filter(e.isBarType.bind(e)).selectAll("circle").remove(),i.interaction_enabled&&!c&&l.EventRect&&(e.redrawEventRect(),e.bindZoomEvent&&e.bindZoomEvent())):(a.arcs&&e.redrawArc(u,d,l.Transform),a.radar&&e.redrawRadar(d)),n.resizing||!e.hasPointType()&&!n.hasRadar||e.updateCircle(),e.hasDataLabel()&&!e.hasArcType(null,["radar"])&&e.updateText(d),e.redrawTitle&&e.redrawTitle(),o&&e.updateTypesElements(),e.generateRedrawList(s,c,u,l.Subchart),e.callPluginHook("$redraw",t,u)},generateRedrawList:function(t,e,i,n){var a=this,r=a.config,s=a.state,o=a.getDrawShape();s.hasAxis&&r.subchart_show&&a.redrawSubchart(n,i,o);var c=e&&a.generateFlow({targets:t,flow:e,duration:e.duration,shape:o,xv:a.xv.bind(a)}),l=(i||c)&&It(),u=a.getRedrawList(o,e,c,l),d=e||r.onrendered?function(){c&&c(),s.redrawing=!1,lt(r.onrendered,a.api)}:null;if(d)if(l&&u.length){var h=jt();Object(f.b)().duration(i).each((function(){u.reduce((function(t,e){return t.concat(e)}),[]).forEach((function(t){return h.add(t)}))})).call(h,d)}else s.transiting||d();a.mapToIds(a.data.targets).forEach((function(t){s.withoutFadeIn[t]=!0}))},getRedrawList:function(t,e,i,n){var a=this,r=a.config,s=a.state,o=s.hasAxis,c=s.hasRadar,l=a.$el.grid,u=t.pos,d=u.cx,h=u.cy,g=u.xForText,f=u.yForText,p=[];if(o){var x=t.type,v=x.area,_=x.bar,m=x.line;(r.grid_x_lines.length||r.grid_y_lines.length)&&p.push(a.redrawGrid(n)),r.regions.length&&p.push(a.redrawRegion(n)),a.hasTypeOf("Line")&&p.push(a.redrawLine(m,n)),a.hasTypeOf("Area")&&p.push(a.redrawArea(v,n)),a.hasType("bar")&&p.push(a.redrawBar(_,n)),!e&&l.main&&p.push(a.updateGridFocus())}return a.hasArcType()&&!c||rt(r.data_labels)&&!1!==r.data_labels&&p.push(a.redrawText(g,f,e,n)),!a.hasPointType()&&!c||r.point_focus_only||a.redrawCircle&&p.push(a.redrawCircle(d,h,n,i)),p},updateAndRedraw:function(t){void 0===t&&(t={});var e,i=this,n=i.config,a=i.state;t.withTransition=ct(t,"withTransition",!0),t.withTransform=ct(t,"withTransform",!1),t.withLegend=ct(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=ct(t,"withTransitionForTransform",t.withTransition),t.withLegend&&n.legend_show||(a.hasAxis&&(e=i.axis.generateTransitions(t.withTransitionForAxis?n.transition_duration:0)),i.updateScales(),i.updateSvgSize(),i.transformAll(t.withTransitionForTransform,e)),i.redraw(t,e)},redrawWithoutRescale:function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})}};function re(t,e,i){void 0===t&&(t="linear"),void 0===e&&(e=0),void 0===i&&(i=1);var n={linear:g.a,log:g.d,_log:g.b,time:g.e}[t]();return n.type=t,/_?log/.test(t)&&n.clamp(!0),n.range([e,i])}var se={getXScale:function(t,e,i,n){var a=this,r=a.scale.zoom||re(a.axis.getAxisType("x"),t,e);return a.getCustomizedScale(i?r.domain(i):r,n)},getYScale:function(t,e,i,n){var a=re(this.axis.getAxisType(t),e,i);return n&&a.domain(n),a},getYScaleById:function(t,e){void 0===e&&(e=!1);var i="y2"===this.axis.getId(t),n=e?i?"subY2":"subY":i?"y2":"y";return this.scale[n]},getCustomizedScale:function(t,e){var i=this,n=e||function(){return i.axis.x.tickOffset()},a=function(e,i){var a=t(e)+n();return i?a:Math.ceil(a)};for(var r in t)a[r]=t[r];return a.orgDomain=function(){return t.domain()},a.orgScale=function(){return t},i.axis.isCategorized()&&(a.domain=function(e){var i=e;return arguments.length?(t.domain(i),a):[(i=this.orgDomain())[0],i[1]+1]}),a},updateScales:function(t,e){void 0===e&&(e=!0);var i=this,n=i.axis,a=i.config,r=i.format,s=i.org,o=i.scale,c=i.state,l=c.width,u=c.height,d=c.width2,h=c.height2;if(c.hasAxis){var g=a.axis_rotated,f={x:g?1:0,y:g?0:u,subX:g?1:0,subY:g?0:h},p={x:g?u:l,y:g?l:1,subX:g?u:l,subY:g?d:1},x=e&&o.x&&o.x.orgDomain(),v=e&&s.xDomain;o.x=i.getXScale(f.x,p.x,x,(function(){return n.x.tickOffset()})),o.subX=i.getXScale(f.x,p.x,v,(function(t){return t%1?0:n.subX.tickOffset()})),r.xAxisTick=n.getXAxisTickFormat(),n.setAxis("x",o.x,a.axis_x_tick_outer,t),a.subchart_show&&n.setAxis("subX",o.subX,a.axis_x_tick_outer,t),o.y=i.getYScale("y",f.y,p.y,o.y?o.y.domain():a.axis_y_default),o.subY=i.getYScale("y",f.subY,p.subY,o.subY?o.subY.domain():a.axis_y_default),n.setAxis("y",o.y,a.axis_y_tick_outer,t),a.axis_y2_show&&(o.y2=i.getYScale("y2",f.y,p.y,o.y2?o.y2.domain():a.axis_y2_default),o.subY2=i.getYScale("y2",f.subY,p.subY,o.subY2?o.subY2.domain():a.axis_y2_default),n.setAxis("y2",o.y2,a.axis_y2_tick_outer,t))}else i.updateArc&&i.updateArc()},xx:function(t){var e=this.config,i=this.scale,n=i.x,a=i.zoom,r=e.zoom_enabled&&a?a:n;return t?r(W(t.x)?t.x:t):null},xv:function(t){var e=this,i=e.axis,n=e.config,a=e.scale.x,r=e.getBaseValue(t);return i.isTimeSeries()?r=Ct.call(e,r):i.isCategorized()&&Z(r)&&(r=n.axis_x_categories.indexOf(r)),Math.ceil(a(r))},yv:function(t){var e=this.scale,i=e.y,n=e.y2,a=t.axis&&"y2"===t.axis?n:i;return Math.ceil(a(this.getBaseValue(t)))},subxx:function(t){return t?this.scale.subX(t.x):null}},oe={getDrawShape:function(){var t=this,e=t.config.axis_rotated,i=t.state.hasRadar,n={type:{},indices:{},pos:{}};if(t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")){var a=t.getShapeIndices(t.isLineType);if(n.indices.line=a,n.type.line=t.generateDrawLine?t.generateDrawLine(a,!1):void 0,t.hasTypeOf("Area")){var r=t.getShapeIndices(t.isAreaType);n.indices.area=r,n.type.area=t.generateDrawArea?t.generateDrawArea(r,!1):void 0}}if(t.hasType("bar")){a=t.getShapeIndices(t.isBarType);n.indices.bar=a,n.type.bar=t.generateDrawBar?t.generateDrawBar(a):void 0}if(!t.hasArcType()||i){var s=i?t.radarCircleX:e?t.circleY:t.circleX,o=i?t.radarCircleY:e?t.circleX:t.circleY;n.pos={xForText:t.generateXYForText(n.indices,!0),yForText:t.generateXYForText(n.indices,!1),cx:(s||function(){}).bind(t),cy:(o||function(){}).bind(t)}}return n},getShapeIndices:function(t){var e=this,i=e.config,n=i.data_xs,a=rt(n),r={},s=a?{}:0;return a&&wt(Object.keys(n).map((function(t){return n[t]}))).forEach((function(t){s[t]=0,r[t]={}})),e.filterTargetsToShow(e.data.targets.filter(t,e)).forEach((function(t){for(var e=(t.id in n?n[t.id]:""),a=e?r[e]:r,o=0,c=void 0;c=i.data_groups[o];o++)if(!(c.indexOf(t.id)<0))for(var l=0,u=void 0;u=c[l];l++)if(u in a){a[t.id]=a[u];break}K(a[t.id])&&(a[t.id]=e?s[e]++:s++,a.__max__=(e?s[e]:s)-1)})),r},getIndices:function(t,e){var i=this.config.data_xs;return rt(i)?t[i[e]]:t},getIndicesMax:function(t){return rt(this.config.data_xs)?Object.keys(t).map((function(e){return t[e].__max__||0})).reduce((function(t,e){return t+e})):t.__max__},getShapeX:function(t,e,i){var n=this,a=n.config,r=n.scale,s=i?r.subX:r.zoom||r.x,o=a.bar_padding,c=function(t,e){return t+e},l=nt(t)&&(t._$total.length?t._$total.reduce(c)/2:0);return function(i){var a=n.getIndices(e,i.id),r=i.id in a?a[i.id]:0,u=(a.__max__||0)+1,d=0;if(rt(i.x)){var h=s(i.x,!0);d=l?h-(t[i.id]||t._$width)+t._$total.slice(0,r+1).reduce(c)-l:h-(J(t)?t:t._$width)*(u/2-r)}return t&&d&&u>1&&o&&(r&&(d+=o*r),u>2?d-=(u-1)*o/2:2===u&&(d-=o/2)),d}},getShapeY:function(t){var e=this,i=e.isStackNormalized();return function(n){var a=i?e.getRatio("index",n,!0):e.isBubbleZType(n)?e.getBubbleZData(n.value,"y"):n.value;return e.getYScaleById(n.id,t)(a)}},getShapeYMin:function(t){var e=this,i=e.scale[e.axis.getId(t)].domain()[0];return!e.isGrouped(t)&&i>0?i:0},getShapeOffsetData:function(t){var e=this,i=e.orderTargets(e.filterTargetsToShow(e.data.targets.filter(t,e))),n=e.isStackNormalized(),a=i.map((function(t){var i=t.values,a={};e.isStepType(t)&&(i=e.convertValuesToStep(i));var r=i.reduce((function(t,i){var r=Number(i.x);return t[r]=i,a[r]=n?e.getRatio("index",i,!0):i.value,t}),{});return{id:t.id,rowValues:i,rowValueMapByXValue:r,values:a}}));return{indexMapByTargetId:i.reduce((function(t,e,i){return t[e.id]=i,t}),{}),shapeOffsetTargets:a}},getShapeOffset:function(t,e,i){var n=this,a=n.getShapeOffsetData(t),r=a.shapeOffsetTargets,s=a.indexMapByTargetId;return function(t,a){var o=n.getIndices(e,t.id),c=n.getYScaleById(t.id,i),l=c(n.getShapeYMin(t.id)),u=Number(t.x),d=l;return r.filter((function(e){return e.id!==t.id})).forEach((function(e){if(o[e.id]===o[t.id]&&s[e.id]<s[t.id]){var i=e.rowValues[a];i&&Number(i.x)===u||(i=e.rowValueMapByXValue[u]),i&&i.value*t.value>=0&&(d+=c(e.values[u])-l)}})),d}},isWithinShape:function(t,e){var i,n=this,a=Object(r.a)(t);return n.isTargetToShow(e.id)?"hasValidPointType"in n&&n.hasValidPointType(t.nodeName)?i=n.isStepType(e)?n.isWithinStep(t,n.getYScaleById(e.id)(e.value)):n.isWithinCircle(t,n.isBubbleType(e)?1.5*n.pointSelectR(e):0):"path"===t.nodeName&&(i=!a.classed(X.bar)||n.isWithinBar(t)):i=!1,i},getInterpolate:function(t){var e=this.getInterpolateType(t);return{basis:p.b,"basis-closed":x.a,"basis-open":v.a,bundle:_.a,cardinal:m.b,"cardinal-closed":y.b,"cardinal-open":b.b,"catmull-rom":T.a,"catmull-rom-closed":w.a,"catmull-rom-open":A.a,"monotone-x":k.a,"monotone-y":k.b,natural:L.a,"linear-closed":S.a,linear:O.a,step:E.a,"step-after":E.b,"step-before":E.c}[e]},getInterpolateType:function(t){var e=this,i=e.config,n=i.spline_interpolation_type,a=e.isInterpolationType(n)?n:"cardinal";return e.isSplineType(t)?a:e.isStepType(t)?i.line_step_type:"linear"}},ce={setContainerSize:function(){var t=this,e=t.state;e.current.width=t.getCurrentWidth(),e.current.height=t.getCurrentHeight()},getCurrentWidth:function(){return this.config.size_width||this.getParentWidth()},getCurrentHeight:function(){var t=this,e=t.config,i=e.size_height||t.getParentHeight();return i>0?i:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var t=this,e=t.config,i=t.state.hasAxis,n=t.$el,a=i?e.axis_y2_axes.length:0,r=W(e.padding_top)?e.padding_top:0;return n.title&&n.title.node()&&(r+=t.getTitlePadding()),a&&e.axis_rotated&&(r+=t.getHorizontalAxisHeight("y2")*a),r},getCurrentPaddingBottom:function(){var t=this,e=t.config,i=t.state.hasAxis,n=e.axis_rotated?"y":"x",a=i?e["axis_"+n+"_axes"].length:0;return(W(e.padding_bottom)?e.padding_bottom:0)+(a?t.getHorizontalAxisHeight(n)*a:0)},getCurrentPaddingLeft:function(t){var e=this,i=e.config,n=e.state.hasAxis,a=i.axis_rotated,r=a?"x":"y",s=n?i["axis_"+r+"_axes"].length:0,o=n?e.getAxisWidthByAxisId(r,t):0;return(W(i.padding_left)?i.padding_left:n&&a?i.axis_x_show?Math.max(tt(o),40):1:!n||i.axis_y_show&&!i.axis_y_inner?tt(o):e.axis.getAxisLabelPosition("y").isOuter?30:1)+o*s},getCurrentPaddingRight:function(t){void 0===t&&(t=!1);var e=this,i=e.config,n=e.state.hasAxis,a=e.state.isLegendRight?e.getLegendWidth()+20:0,r=n?i.axis_y2_axes.length:0,s=n?e.getAxisWidthByAxisId("y2"):0,o=t?e.axis.getXAxisTickTextY2Overflow(10):0;return(W(i.padding_right)?i.padding_right+1:e.axis&&i.axis_rotated?10+a:!e.axis||i.axis_y2_show&&!i.axis_y2_inner?Math.max(tt(s)+a,o):Math.max(2+a+(e.axis.getAxisLabelPosition("y2").isOuter?20:0),o))+s*r},getParentRectValue:function(t){for(var e,i="offset"+yt(t),n=this.$el.chart.node();!e&&n&&"BODY"!==n.tagName;){try{e=n.getBoundingClientRect()[t]}catch(r){i in n&&(e=n[i])}n=n.parentNode}if("width"===t){var a=G.body.offsetWidth;e>a&&(e=a)}return e},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.$el.chart.style("height");return t.indexOf("px")>0?parseInt(t,10):0},getSvgLeft:function(t){var e=this,i=e.config,n=e.$el,a=i.axis_rotated||!i.axis_rotated&&!i.axis_y_inner,r=i.axis_rotated?X.axisX:X.axisY,s=n.main.select("."+r).node(),o=s&&a?s.getBoundingClientRect():{right:0},c=n.chart.node().getBoundingClientRect(),l=e.hasArcType(),u=o.right-c.left-(l?0:e.getCurrentPaddingLeft(t));return u>0?u:0},updateDimension:function(t){var e=this,i=e.config,n=e.state.hasAxis,a=e.$el;n&&!t&&(e.axis.x&&i.axis_rotated?(e.axis.x.create(a.axis.x),e.axis.subX&&e.axis.subX.create(a.axis.subX)):(e.axis.y&&e.axis.y.create(a.axis.y),e.axis.y2&&e.axis.y2.create(a.axis.y2))),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)},updateSvgSize:function(){var t=this,e=t.state,i=e.clip,n=e.current,a=e.hasAxis,r=e.width,s=e.height,o=t.$el.svg;if(o.attr("width",n.width).attr("height",n.height),a){var c=o.select("."+X.brush+" .overlay"),l={width:0,height:0};c.size()&&(l.width=+c.attr("width"),l.height=+c.attr("height")),o.selectAll(["#"+i.id,"#"+i.idGrid]).select("rect").attr("width",r).attr("height",s),o.select("#"+i.idXAxis).select("rect").call(t.setXAxisClipPath.bind(t)),o.select("#"+i.idYAxis).select("rect").call(t.setYAxisClipPath.bind(t)),i.idSubchart&&o.select("#"+i.idSubchart).select("rect").attr("width",r).attr("height",l.height)}},updateSizes:function(t){var e=this,i=e.config,n=e.state,a=e.$el.legend,r=i.axis_rotated,s=e.hasArcType();!t&&e.setContainerSize();var o={width:a?e.getLegendWidth():0,height:a?e.getLegendHeight():0};!s&&i.axis_x_show&&i.axis_x_tick_autorotate&&e.updateXAxisTickClip();var c=n.isLegendRight||n.isLegendInset?0:o.height,l=r||s?0:e.getHorizontalAxisHeight("x"),u=i.subchart_axis_x_show&&i.subchart_axis_x_tick_text_show?l:30,d=i.subchart_show&&!s?i.subchart_size_height+u:0;n.margin=!s&&r?{top:e.getHorizontalAxisHeight("y2")+e.getCurrentPaddingTop(),right:s?0:e.getCurrentPaddingRight(!0),bottom:e.getHorizontalAxisHeight("y")+c+e.getCurrentPaddingBottom(),left:d+(s?0:e.getCurrentPaddingLeft())}:{top:4+e.getCurrentPaddingTop(),right:s?0:e.getCurrentPaddingRight(!0),bottom:l+d+c+e.getCurrentPaddingBottom(),left:s?0:e.getCurrentPaddingLeft()},n.margin2=r?{top:n.margin.top,right:NaN,bottom:20+c,left:e.state.rotatedPadding.left}:{top:n.current.height-d-c,right:NaN,bottom:u+c,left:n.margin.left},n.margin3={top:0,right:NaN,bottom:0,left:0},e.updateSizeForLegend&&e.updateSizeForLegend(o),n.width=n.current.width-n.margin.left-n.margin.right,n.height=n.current.height-n.margin.top-n.margin.bottom,n.width<0&&(n.width=0),n.height<0&&(n.height=0),n.width2=r?n.margin.left-n.rotatedPadding.left-n.rotatedPadding.right:n.width,n.height2=r?n.height:n.current.height-n.margin2.top-n.margin2.bottom,n.width2<0&&(n.width2=0),n.height2<0&&(n.height2=0);var h=e.hasType("gauge"),g=i.legend_show&&n.isLegendRight;n.arcWidth=n.width-(g?o.width+10:0),n.arcHeight=n.height-(g&&!h?0:10),h&&!i.gauge_fullCircle&&(n.arcHeight+=n.height-e.getPaddingBottomForGauge()),e.updateRadius&&e.updateRadius(),n.isLegendRight&&s&&(n.margin3.left=n.arcWidth/2+1.1*n.radiusExpanded)}},le={opacityForText:function(t){var e=this;return e.isBarType(t)&&!e.meetsLabelThreshold(Math.abs(e.getRatio("bar",t)),"bar")?"0":e.hasDataLabel?"1":"0"},initText:function(){this.$el.main.select("."+X.chart).append("g").attr("class",X.chartTexts)},updateTargetsForText:function(t){var e=this,i=e.getChartClass("Text"),n=e.getClass("texts","id"),a=e.classFocus.bind(e);e.$el.main.select("."+X.chartTexts).selectAll("."+X.chartText).data(t).attr("class",(function(t){return i(t)+a(t)})).enter().append("g").style("opacity","0").attr("class",i).style("pointer-events","none").append("g").attr("class",n)},updateText:function(t){var e=this,i=e.config,n=e.$el,a=e.labelishData.bind(e),s=e.getClass("text","index");n.text=n.main.selectAll("."+X.texts).selectAll("."+X.text).data((function(t){return e.isRadarType(t)?t.values:a(t)})),n.text.exit().transition().duration(t).style("fill-opacity","0").remove(),n.text=n.text.enter().append("text").merge(e.$el.text).attr("class",s).attr("text-anchor",(function(t){return i.axis_rotated?t.value<0?"end":"start":"middle"})).style("fill",e.updateTextColor.bind(e)).style("fill-opacity","0").call((function(t){t.each((function(t,i,n){var a=e.isBubbleZType(t)?e.getBubbleZData(t.value,"z"):t.value;a=e.dataLabelFormat(t.id)(a,t.id,i,n),J(a)?this.textContent=a:ht(Object(r.a)(this),a)}))}))},updateTextColor:function(t){var e,i=this,n=i.config.data_labels_colors,a=i.isArcType(t)&&!i.isRadarType(t)?null:i.color(t);if(Z(n))e=n;else if(ot(n)){e=n[(t.data||t).id]}else U(n)&&(e=n.bind(i.api)(a,t));return e||a},redrawText:function(t,e,i,n){var a=this,s=xt(),o=i?0:a.opacityForText.bind(a);return a.$el.text.each((function(i,c){var l=Object(r.a)(this);(n&&l.attr("x")?l.transition(s):l).call((function(i){i.each((function(i){Object(r.a)(this).style("fill",a.updateTextColor.bind(a)).style("fill-opacity",o);var n=t.bind(this)(i,c),s=e.bind(this)(i,c);this.childElementCount?this.setAttribute("transform","translate("+n+" "+s+")"):(this.setAttribute("x",n),this.setAttribute("y",s))}))}))})),!0},getTextRect:function(t,e){var i=this,n=t.node?t.node():t;/text/i.test(n.tagName)||(n=n.querySelector("text"));var a=n.textContent,s=$t+"-"+a.replace(/\W/g,"_"),o=i.cache.get(s);return o||(i.$el.svg.append("text").style("visibility","hidden").style("font",Object(r.a)(n).style("font")).classed(e,!0).text(a).call((function(t){o=pt(t.node())})).remove(),i.cache.add(s,o)),o},generateXYForText:function(t,e){var i=this,n=Object.keys(t),a={},r=e?i.getXForText:i.getYForText;return i.hasType("radar")&&n.push("radar"),n.forEach((function(e){a[e]=i["generateGet"+yt(e)+"Points"](t[e],!1)})),function(t,e){var n=(i.isAreaType(t)?"area":i.isBarType(t)&&"bar")||i.isRadarType(t)&&"radar"||"line";return r.call(i,a[n](t,e),t,this)}},getCenteredTextPos:function(t,e,i){var n=this.config,a=n.axis_rotated;if(n.data_labels.centered&&this.isBarType(t)){var r=pt(i),s=t.value>=0;if(a){var o=(s?e[1][1]-e[0][1]:e[0][1]-e[1][1])/2+r.width/2;return s?-o-3:o+2}var c=(s?e[0][1]-e[1][1]:e[1][1]-e[0][1])/2+r.height/2;return s?c:-c-2}return 0},getTextPos:function(t,e){var i=this.config.data_labels_position;return(t in i?i[t]:i)[e]||0},getXForText:function(t,e,i){var n,a,r=this,s=r.config,o=r.state,c=s.axis_rotated;if(c?(a=r.isBarType(e)?4:6,n=t[2][1]+a*(e.value<0?-1:1)):n=r.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value)if(n>o.width){var l=pt(i).width;n=o.width-l}else n<0&&(n=4);return c&&(n+=r.getCenteredTextPos(e,t,i)),n+r.getTextPos(e.id,"x")},getYForText:function(t,e,i){var n,a=this,r=a.config,s=a.state,o=r.axis_rotated,c=r.point_r,l=pt(i),u=3;if(o)n=(t[0][0]+t[2][0]+.6*l.height)/2;else if(n=t[2][1],J(c)&&c>5&&(a.isLineType(e)||a.isScatterType(e))&&(u+=r.point_r/2.3),e.value<0||0===e.value&&!s.hasPositiveValue&&s.hasNegativeValue)n+=l.height+(a.isBarType(e)?-u:u);else{var d=2*-u;a.isBarType(e)?d=-u:a.isBubbleType(e)&&(d=u),n+=d}if(null===e.value&&!o){var h=l.height;n<h?n=h:n>s.height&&(n=s.height-4)}return o||(n+=a.getCenteredTextPos(e,t,i)),n+a.getTextPos(e.id,"y")},markOverlapped:function(t,e,i){var n=e.$el.arcs.selectAll(i),a=n.filter((function(e){return e.data.id!==t})),s=n.filter((function(e){return e.data.id===t})),o=Tt(s.node()),c=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))};s.node()&&a.each((function(){var t=Tt(this),e=Object(r.a)(this),i=c(o.e,o.f)>c(t.e,t.f)?s:e,n=Math.ceil(Math.abs(o.e-t.e))<Math.ceil(i.node().getComputedTextLength()),a=Math.ceil(Math.abs(o.f-t.f))<parseInt(s.style("font-size"),10);e.classed(X.TextOverlapping,n&&a)}))},undoMarkOverlapped:function(t,e){t.$el.arcs.selectAll(e).each((function(){Object(c.a)([this,this.previousSibling]).classed(X.TextOverlapping,!1)}))},meetsLabelThreshold:function(t,e){void 0===t&&(t=0);return t>=(this.config[e+"_label_threshold"]||0)}};function ue(t,e){void 0===t&&(t="left");var i=J(e);return t.indexOf("center")>-1?i?e/2:"middle":t.indexOf("right")>-1?i?e:"end":i?0:"start"}var de={initTitle:function(){var t=this.config,e=this.$el;t.title_text&&(e.title=e.svg.append("g"),ht(e.title.append("text").style("text-anchor",ue(t.title_position)).attr("class",X.title),t.title_text,[.3,1.5]))},redrawTitle:function(){var t=this,e=t.config,i=t.state.current,n=t.$el.title;if(n){var a=t.yForTitle.call(t);/g/i.test(n.node().tagName)?n.attr("transform","translate("+ue(e.title_position,i.width)+", "+a+")"):n.attr("x",t.xForTitle.call(t)).attr("y",a)}},xForTitle:function(){var t,e=this,i=e.config,n=e.state.current,a=i.title_position||"left",r=e.getTextRect(e.$el.title,X.title).width;return/(right|center)/.test(a)?(t=n.width-r,a.indexOf("right")>=0?t=n.width-r-i.title_padding.right:a.indexOf("center")>=0&&(t=(n.width-r)/2)):t=i.title_padding.left||0,t},yForTitle:function(){var t=this;return(t.config.title_padding.top||0)+t.getTextRect(t.$el.title,X.title).height},getTitlePadding:function(){return this.yForTitle()+(this.config.title_padding.bottom||0)}},he={initTooltip:function(){var t=this,e=t.config,i=t.$el;i.tooltip=Object(r.a)(e.tooltip_contents.bindto),i.tooltip.empty()&&(i.tooltip=i.chart.style("position","relative").append("div").attr("class",X.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none")),t.bindTooltipResizePos()},initShowTooltip:function(){var t=this,e=t.config,i=t.$el,n=t.state,a=n.hasAxis,r=n.hasRadar;if(e.tooltip_init_show){var s=!(a&&r);if(t.axis&&t.axis.isTimeSeries()&&Z(e.tooltip_init_x)){var o=t.data.targets[0],c=void 0,l=void 0;for(e.tooltip_init_x=Ct.call(t,e.tooltip_init_x),c=0;(l=o.values[c])&&l.x-e.tooltip_init_x!==0;c++);e.tooltip_init_x=c}var u=t.data.targets.map((function(i){var n=s?0:e.tooltip_init_x;return t.addName(i.values[n])}));s&&(u=[u[e.tooltip_init_x]]),i.tooltip.html(t.getTooltipHTML(u,t.axis&&t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType(null,["radar"])),t.color)),e.tooltip_contents.bindto||i.tooltip.style("top",e.tooltip_init_position.top).style("left",e.tooltip_init_position.left).style("display","block")}},getTooltipHTML:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this,n=i.api,a=i.config;return U(a.tooltip_contents)?a.tooltip_contents.bind(n).apply(void 0,t):i.getTooltipContent.apply(i,t)},getTooltipContent:function(t,e,i,n){var a=this,r=a.api,s=a.config,o=a.state,c=["title","name","value"].map((function(t){var e=s["tooltip_format_"+t];return U(e)?e.bind(r):e})),l=c[0],u=c[1],d=c[2];l=l||e,u=u||function(t){return t},d=d||(a.isStackNormalized()?function(t,e){return(100*e).toFixed(2)+"%"}:i);var h=s.tooltip_order,g=function(t){return a.axis&&a.isBubbleZType(t)?a.getBubbleZData(t.value,"z"):a.getBaseValue(t)},f=a.levelColor?function(t){return a.levelColor(t.value)}:function(t){return n(t)},p=s.tooltip_contents,x=p.template,v=a.mapToTargetIds();if(null===h&&s.data_groups.length){var _=a.orderTargets(a.data.targets).map((function(t){return t.id})).reverse();t.sort((function(t,e){var i=t?t.value:null,n=e?e.value:null;return i>0&&n>0&&(i=t.id?_.indexOf(t.id):null,n=e.id?_.indexOf(e.id):null),i-n}))}else if(/^(asc|desc)$/.test(h)){var m="asc"===h;t.sort((function(t,e){var i=t?g(t):null,n=e?g(e):null;return m?i-n:n-i}))}else U(h)&&t.sort(h.bind(r));var y,b,T,w,A,k=a.getTooltipContentTemplate(x),L=t.length,S=function(){if(!(b=t[A])||!g(b)&&0!==g(b))return"continue";if(K(y)){var e=(o.hasAxis||o.hasRadar)&&dt(l?l(b.x):b.x);y=Et(k[0],{CLASS_TOOLTIP:X.tooltip,TITLE:W(e)?x?e:'<tr><th colspan="2">'+e+"</th></tr>":""})}if(!b.ratio&&a.$el.arcs&&(b.ratio=a.getRatio("arc",a.$el.arcs.select("path."+X.arc+"-"+b.id).data()[0])),T=[b.ratio,b.id,b.index,t],w=dt(d.apply(void 0,P([g(b)],T))),a.isAreaRangeType(b)){var i=["high","low"].map((function(t){return dt(d.apply(void 0,P([a.getAreaRangeData(b,t)],T)))})),n=i[0],r=i[1];w="<b>Mid:</b> "+w+" <b>High:</b> "+n+" <b>Low:</b> "+r}if(void 0!==w){if(null===b.name)return"continue";var s=dt(u.apply(void 0,P([b.name],T))),c=f(b),h={CLASS_TOOLTIP_NAME:X.tooltipName+a.getTargetSelectorSuffix(b.id),COLOR:x||!a.patterns?c:'<svg><rect style="fill:'+c+'" width="10" height="10"></rect></svg>',NAME:s,VALUE:w};if(x&&ot(p.text)){var _=v.indexOf(b.id);Object.keys(p.text).forEach((function(t){h[t]=p.text[t][_]}))}y+=Et(k[1],h)}};for(A=0;A<L;A++)S();return y+"</table>"},getTooltipContentTemplate:function(t){return(t||'<table class="{=CLASS_TOOLTIP}"><tbody>\n\t\t\t\t{=TITLE}\n\t\t\t\t{{<tr class="{=CLASS_TOOLTIP_NAME}">\n\t\t\t\t\t<td class="name">'+(this.patterns?"{=COLOR}":'<span style="background-color:{=COLOR}"></span>')+'{=NAME}</td>\n\t\t\t\t\t<td class="value">{=VALUE}</td>\n\t\t\t\t</tr>}}\n\t\t\t</tbody></table>').replace(/(\r?\n|\t)/g,"").split(/{{(.*)}}/)},tooltipPosition:function(t,e,i,n){var a=this,r=a.config,o=a.scale,c=a.state,l=c.width,u=c.height,d=c.current,h=c.isLegendRight,g=c.inputType,f=a.hasType("gauge")&&!r.gauge_fullCircle,p=a.getSvgLeft(!0),x=Object(s.a)(n),v=x[0],_=x[1],m=p+d.width-a.getCurrentPaddingRight(),y=a.getCurrentPaddingLeft(!0);if(a.hasArcType()){"touch"===g||a.hasType("radar")||(_+=f?u:u/2,v+=(l-(h?a.getLegendWidth():0))/2)}else{var b=o.x(t[0].x);r.axis_rotated?(_=b+20,v+=p+100,m-=p):(_-=5,v=p+y+20+(a.zoomScale?v:b))}v+e+15>m&&(v-=e+y),_+i>d.height&&(_-=f?3*i:i+30);var T={top:_,left:v};return Object.keys(T).forEach((function(t){T[t]<0&&(T[t]=0)})),T},showTooltip:function(t,e){var i=this,n=i.config,a=i.state,r=i.$el.tooltip,s=n.tooltip_contents.bindto,o=i.hasArcType(null,["radar"]),c=t.filter((function(t){return t&&W(i.getBaseValue(t))}));if(r&&0!==c.length&&n.tooltip_show){var l=r.datum(),u=l||{},d=u.width,h=void 0===d?0:d,g=u.height,f=void 0===g?0:g,p=JSON.stringify(t);if(!l||l.current!==p){var x=t.concat().sort()[0].index;lt(n.tooltip_onshow,i.api,t),r.html(i.getTooltipHTML(t,i.axis?i.axis.getXAxisTickFormat():i.categoryName.bind(i),i.getYFormat(o),i.color)).style("display",null).style("visibility",null).datum(l={index:x,current:p,width:h=r.property("offsetWidth"),height:f=r.property("offsetHeight")}),lt(n.tooltip_onshown,i.api,t),i._handleLinkedCharts(!0,x)}if(!s){var v=(n.tooltip_position||i.tooltipPosition).call(this,c,h,f,e);["top","left"].forEach((function(t){var e=v[t];r.style(t,e+"px"),"left"!==t||l.xPosInPercent||(l.xPosInPercent=e/a.current.width*100)}))}}},bindTooltipResizePos:function(){var t=this,e=t.resizeFunction,i=t.state,n=t.$el.tooltip;e.add((function(){if("block"===n.style("display")){var t=i.current,e=n.datum(),a=e.width,r=e.xPosInPercent,s=t.width/100*r,o=t.width-(s+a);o<0&&(s+=o),n.style("left",s+"px")}}))},hideTooltip:function(t){var e=this,i=e.api,n=e.config,a=e.$el.tooltip;if(a&&"none"!==a.style("display")&&(!n.tooltip_doNotHide||t)){var r=JSON.parse(a.datum().current);lt(n.tooltip_onhide,i,r),a.style("display","none").style("visibility","hidden").datum(null),lt(n.tooltip_onhidden,i,r)}},_handleLinkedCharts:function(t,e){var i=this,n=i.charts,r=i.config;if(a.c&&a.c.isTrusted&&r.tooltip_linked&&n.length>1){var s=r.tooltip_linked_name;n.filter((function(t){return t!==i.api})).forEach((function(i){var n=i.internal,a=n.config,r=n.$el,o=a.tooltip_linked,c=a.tooltip_linked_name,l=G.body.contains(r.chart.node());if(o&&s===c&&l){var u=r.tooltip.data()[0],d=e!==(u&&u.index);try{i.tooltip[t&&d?"show":"hide"]({index:e})}catch(h){}}}))}}},ge={getTranslate:function(t,e){void 0===e&&(e=0);var i,n,a=this,r=a.config,s=a.state,o=r.axis_rotated,c=0;if(e&&/^(x|y2?)$/.test(t)&&(c=a.getAxisSize(t)*e),"main"===t)i=et(s.margin.left),n=et(s.margin.top);else if("context"===t)i=et(s.margin2.left),n=et(s.margin2.top);else if("legend"===t)i=s.margin3.left,n=s.margin3.top;else if("x"===t)i=o?-c:0,n=o?0:s.height+c;else if("y"===t)i=o?0:-c,n=o?s.height+c:0;else if("y2"===t)i=o?0:s.width+c,n=o?1-c:0;else if("subX"===t)i=0,n=o?0:s.height2;else if("arc"===t)i=s.arcWidth/2,n=s.arcHeight/2;else if("radar"===t){var l=a.getRadarSize()[0];i=s.width/2-l,n=et(s.margin.top)}return"translate("+i+", "+n+")"},transformMain:function(t,e){var i,n,a,r=this,s=r.$el.main;e&&e.axisX?i=e.axisX:(i=s.select("."+X.axisX),t&&(i=i.transition())),e&&e.axisY?n=e.axisY:(n=s.select("."+X.axisY),t&&(n=n.transition())),e&&e.axisY2?a=e.axisY2:(a=s.select("."+X.axisY2),t&&(a=a.transition())),(t?s.transition():s).attr("transform",r.getTranslate("main")),i.attr("transform",r.getTranslate("x")),n.attr("transform",r.getTranslate("y")),a.attr("transform",r.getTranslate("y2")),s.select("."+X.chartArcs).attr("transform",r.getTranslate("arc"))},transformAll:function(t,e){var i=this,n=i.config,a=i.state.hasAxis,r=i.$el;i.transformMain(t,e),a&&n.subchart_show&&i.transformContext(t,e),r.legend&&i.transformLegend(t)}},fe={setTargetType:function(t,e){var i=this,n=i.config,a=i.state.withoutFadeIn;i.mapToTargetIds(t).forEach((function(t){a[t]=e===n.data_types[t],n.data_types[t]=e})),t||(n.data_type=e)},updateTypesElements:function(){var t=this,e=t.state.current;Object.keys(qt).forEach((function(i){var n=qt[i],a=t.hasType(n,null,!0),r=e.types.indexOf(n);-1===r&&a?e.types.push(n):r>-1&&!a&&e.types.splice(r,1)})),t.setChartElements()},hasType:function(t,e,i){void 0===i&&(i=!1);var n=this,a=n.config,r=n.state.current,s=a.data_types,o=e||n.data.targets,c=!1;return!i&&r.types.length&&r.types.indexOf(t)>-1?c=!0:o&&o.length?o.forEach((function(e){var i=s[e.id];(i===t||!i&&"line"===t)&&(c=!0)})):Object.keys(s).length?Object.keys(s).forEach((function(e){s[e]===t&&(c=!0)})):c=a.data_type===t,c},hasTypeOf:function(t,e,i){var n=this;return void 0===i&&(i=[]),!Qt[t].filter((function(t){return-1===i.indexOf(t)})).every((function(t){return!n.hasType(t,e)}))},isTypeOf:function(t,e){var i=Z(t)?t:t.id,n=this.config.data_types[i]||this.config.data_type;return st(e)?e.indexOf(n)>=0:n===e},hasPointType:function(){var t=this;return t.hasTypeOf("Line")||t.hasType("bubble")||t.hasType("scatter")},hasArcType:function(t,e){return this.hasTypeOf("Arc",t,e)},hasMultiArcGauge:function(){return this.hasType("gauge")&&"multi"===this.config.gauge_type},isLineType:function(t){var e=Z(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,Qt.Line)},isStepType:function(t){return this.isTypeOf(t,Qt.Step)},isSplineType:function(t){return this.isTypeOf(t,Qt.Spline)},isAreaType:function(t){return this.isTypeOf(t,Qt.Area)},isAreaRangeType:function(t){return this.isTypeOf(t,Qt.AreaRange)},isBarType:function(t){return this.isTypeOf(t,"bar")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isRadarType:function(t){return this.isTypeOf(t,"radar")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)||this.isRadarType(t)},isCirclePoint:function(t){var e=this.config,i=e.point_pattern;return!(!t||"circle"!==t.tagName)||"circle"===e.point_type&&(!i||st(i)&&0===i.length)},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},barData:function(t){return this.isBarType(t)?t.values:[]},labelishData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)||this.isRadarType(t)?t.values:[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}},pe=function(){function t(t){this.data={xs:{},targets:[]},this.scale={x:null,y:null,y2:null,subX:null,subY:null,subY2:null,zoom:null},this.org={xScale:null,xDomain:null},this.format={extraLineClasses:null,xAxisTick:null,dataTime:null,defaultAxisTime:null,axisTime:null};var e=this;e.api=t,e.config=new Rt,e.cache=new Yt;var i=new F;e.$el=i.getStore("element"),e.state=i.getStore("state")}return t.prototype.beforeInit=function(){var t=this;t.callPluginHook("$beforeInit"),lt(t.config.onbeforeinit,t.api)},t.prototype.afterInit=function(){var t=this;t.callPluginHook("$afterInit"),lt(t.config.onafterinit,t.api)},t.prototype.init=function(){var t=this,e=t.config,i=t.state,n=t.$el;i.hasAxis=!t.hasArcType(),i.hasRadar=!i.hasAxis&&t.hasType("radar"),t.initParams();var a={element:e.bindto,classname:"bb"};ot(e.bindto)&&(a.element=e.bindto.element||"#chart",a.classname=e.bindto.classname||a.classname),n.chart=U(a.element.node)?e.bindto.element:Object(r.a)(a.element||[]),n.chart.empty()&&(n.chart=Object(r.a)(G.body.appendChild(G.createElement("div")))),n.chart.html("").classed(a.classname,!0),t.initToRender()},t.prototype.initToRender=function(t){var e=this,i=e.config,n=e.state,a=e.$el.chart,r=function(){return"none"===a.style("display")||"hidden"===a.style("visibility")},s=i.render.lazy||r(),o=H.MutationObserver;if(s&&o&&!1!==i.render.observe&&!t&&new o((function(t,i){r()||(i.disconnect(),!n.rendered&&e.initToRender(!0))})).observe(a.node(),{attributes:!0,attributeFilter:["class","style"]}),!s||t){var c=e.convertData(i,e.initWithData);c&&e.initWithData(c),e.afterInit()}},t.prototype.initParams=function(){var t=this,e=t,i=e.config,a=e.format,r=e.state,s=i.axis_rotated;if(r.datetimeId="bb-"+ +new Date,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.hasPointType()&&(t.point=t.generatePoint()),r.hasAxis){t.initClip(),a.extraLineClasses=t.generateExtraLineClass(),a.dataTime=i.data_xLocaltime?n.b:n.d,a.axisTime=i.axis_x_localtime?n.a:n.c;var o=t.config.zoom_enabled&&"drag"===t.config.zoom_type;a.defaultAxisTime=function(e){var i=t.scale,n=i.x,r=i.zoom,s=o?r:r&&n.orgDomain().toString()!==r.domain().toString(),c=(e.getMilliseconds()?".%L":e.getSeconds()&&".:%S")||e.getMinutes()&&"%I:%M"||e.getHours()&&"%I %p"||1!==e.getDate()&&"%b %d"||s&&1===e.getDate()&&"%b'%y"||e.getMonth()&&"%-m/%-d"||"%Y";return a.axisTime(c)(e)}}r.isLegendRight="right"===i.legend_position,r.isLegendInset="inset"===i.legend_position,r.isLegendTop="top-left"===i.legend_inset_anchor||"top-right"===i.legend_inset_anchor,r.isLegendLeft="top-left"===i.legend_inset_anchor||"bottom-left"===i.legend_inset_anchor,r.rotatedPaddingRight=s&&!i.axis_x_show?0:30,r.inputType=function(t,e){var i=!1;if(/Mobi/.test(H.navigator.userAgent)&&e){var n=H.navigator&&"maxTouchPoints"in H.navigator&&H.navigator.maxTouchPoints>0,a="ontouchmove"in H||H.DocumentTouch&&G instanceof H.DocumentTouch;i=n||a}return(t&&!i&&"onmouseover"in H?"mouse":i&&"touch")||null}(i.interaction_inputType_mouse,i.interaction_inputType_touch)},t.prototype.initWithData=function(t){var e=this,i=e.config,n=e.scale,a=e.state,r=e.$el,s=e.org,o=a.hasAxis,c=i.interaction_enabled;o&&(e.axis=e.getAxisInstance(),i.zoom_enabled&&e.initZoom()),e.data.xs={},e.data.targets=e.convertDataToTargets(t),i.data_filter&&(e.data.targets=e.data.targets.filter(i.data_filter.bind(e.api))),i.data_hide&&e.addHiddenTargetIds(!0===i.data_hide?e.mapToIds(e.data.targets):i.data_hide),i.legend_hide&&e.addHiddenLegendIds(!0===i.legend_hide?e.mapToIds(e.data.targets):i.legend_hide),e.updateSizes(),e.updateScales(!0);var l=n.x,u=n.y,d=n.y2,h=n.subX,g=n.subY,f=n.subY2;if(l&&(l.domain(Lt(e.getXDomain(e.data.targets))),h.domain(l.domain()),s.xDomain=l.domain()),u&&(u.domain(e.getYDomain(e.data.targets,"y")),g.domain(u.domain())),d&&(d.domain(e.getYDomain(e.data.targets,"y2")),f&&f.domain(d.domain())),r.svg=r.chart.append("svg").style("overflow","hidden").style("display","block"),c&&a.inputType){var p="touch"===a.inputType;r.svg.on(p?"touchstart":"mouseenter",(function(){return lt(i.onover,e.api)})).on(p?"touchend":"mouseleave",(function(){return lt(i.onout,e.api)}))}i.svg_classname&&r.svg.attr("class",i.svg_classname);var x=U(i.color_tiles)&&e.patterns;(o||x)&&(r.defs=r.svg.append("defs"),o&&["id","idXAxis","idYAxis","idGrid"].forEach((function(t){e.appendClip(r.defs,a.clip[t])})),x&&e.patterns.forEach((function(t){return r.defs.append((function(){return t.node}))}))),e.updateSvgSize(),e.bindResize();var v=r.svg.append("g").classed(X.main,!0).attr("transform",e.getTranslate("main"));if(r.main=v,i.subchart_show&&e.initSubchart(),i.tooltip_show&&e.initTooltip(),i.title_text&&e.initTitle(),i.legend_show&&e.initLegend(),i.data_empty_label_text&&v.append("text").attr("class",X.text+" "+X.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),o&&(i.regions.length&&e.initRegion(),!i.clipPath&&e.axis.init()),v.append("g").attr("class",X.chart).attr("clip-path",a.clip.path),e.callPluginHook("$init"),o&&(c&&e.initEventRect&&e.initEventRect(),e.initGrid(),i.clipPath&&e.axis&&e.axis.init()),e.initChartElements(),e.updateTargets(e.data.targets),e.updateDimension(),lt(i.oninit,e.api),e.setBackground(),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1,initializing:!0}),i.data_onmin||i.data_onmax){var _=e.getMinMaxData();lt(i.data_onmin,e.api,_.min),lt(i.data_onmax,e.api,_.max)}i.tooltip_show&&e.initShowTooltip(),a.rendered=!0},t.prototype.initChartElements=function(){var t=this,e=t.state,i=e.hasAxis,n=e.hasRadar,a=[];i?(t.hasType("bar")&&a.push("Bar"),t.hasType("bubble")&&a.push("Bubble"),t.hasTypeOf("Line")&&a.push("Line")):(n||a.push("Arc","Pie"),t.hasType("gauge")?a.push("Gauge"):n&&a.push("Radar")),a.forEach((function(e){t["init"+e]()})),rt(t.config.data_labels)&&!t.hasArcType(null,["radar"])&&t.initText()},t.prototype.setChartElements=function(){var t=this.$el,e=t.chart,i=t.svg,n=t.defs,a=t.main,r=t.tooltip,s=t.legend,o=t.title,c=t.grid,l=t.arcs,u=t.circle,d=t.bar,h=t.line,g=t.area,f=t.text;this.api.$={chart:e,svg:i,defs:n,main:a,tooltip:r,legend:s,title:o,grid:c,arc:l,circles:u,bar:{bars:d},line:{lines:h,areas:g},text:{texts:f}}},t.prototype.setBackground=function(){var t=this,e=t.config.background,i=t.state,n=t.$el.svg;if(rt(e)){var a=n.select("g").insert(e.imgUrl?"image":"rect",":first-child");e.imgUrl?a.attr("href",e.imgUrl):e.color&&a.style("fill",e.color).attr("clip-path",i.clip.path),a.attr("class",e.class||null).attr("width","100%").attr("height","100%")}},t.prototype.updateTargets=function(t){var e=this,i=e.state,n=i.hasAxis,a=i.hasRadar;e.updateTargetsForText(t),n?(e.hasType("bar")&&e.updateTargetsForBar(t),e.hasTypeOf("Line")&&e.updateTargetsForLine(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t)):e.hasArcType(t)&&(a?e.updateTargetsForRadar(t):e.updateTargetsForArc(t)),(e.hasType("bubble")||e.hasType("scatter"))&&e.updateTargetForCircle&&e.updateTargetForCircle(),e.showTargets()},t.prototype.showTargets=function(){var t=this,e=t.config;t.$el.svg.selectAll("."+X.target).filter((function(e){return t.isTargetToShow(e.id)})).transition().duration(e.transition_duration).style("opacity","1")},t.prototype.getWithOption=function(t){var e={Y:!0,Subchart:!0,Transition:!0,EventRect:!0,Dimension:!0,TrimXDomain:!0,Transform:!1,UpdateXDomain:!1,UpdateOrgXDomain:!1,Legend:!1,UpdateXAxis:"UpdateXDomain",TransitionForExit:"Transition",TransitionForAxis:"Transition"};return Object.keys(e).forEach((function(i){var n=e[i];Z(n)&&(n=e[n]),e[i]=ct(t,"with"+i,n)})),e},t.prototype.initialOpacity=function(t){var e=this.state.withoutFadeIn;return null!==this.getBaseValue(t)&&e[t.id]?"1":"0"},t.prototype.bindResize=function(){var t=this,e=t.config,i=t.state,n=function(){var t,e=[],i=function(){i.clear(),t=Nt((function(){e.forEach((function(t){return t()}))}),200)};return i.clear=function(){t&&(Vt(t),t=null)},i.add=function(t){return e.push(t)},i.remove=function(t){return e.splice(e.indexOf(t),1)},i}(),a=[];a.push((function(){return lt(e.onresize,t,t.api)})),e.resize_auto&&a.push((function(){i.resizing=!0,t.api.flush(!1)})),a.push((function(){lt(e.onresized,t,t.api),i.resizing=!1})),a.forEach((function(t){return n.add(t)})),t.resizeFunction=n,H.addEventListener("resize",t.resizeFunction=n)},t.prototype.callPluginHook=function(t){for(var e=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.config.plugins.forEach((function(n){"$beforeInit"===t&&(n.$$=e,e.api.plugins.push(n)),n[t].apply(n,i)}))},t}();function xe(t){var e,i,n,a=this.config,r=function(){var t=i.shift();return t&&e&&nt(e)&&t in e?(e=e[t],r()):t?void 0:e};Object.keys(a).forEach((function(s){e=t,i=s.split("_"),n=r(),q(n)&&(a[s]=n)}))}mt(pe.prototype,[Ht,Gt,Wt,{categoryName:function(t){var e=this.config.axis_x_categories;return e&&t<e.length?e[t]:t}},Zt,Kt,te,Ut,ie,ne,ae,se,oe,ce,le,de,he,ge,fe]);var ve={resize:function(t){var e=this.internal,i=e.config,n=e.state;n.rendered&&(i.size_width=t?t.width:null,i.size_height=t?t.height:null,n.resizing=!0,this.flush(!1,!0),e.resizeFunction())},flush:function(t){var e=this.internal,i=e.state;i.rendered?(i.resizing?e.brush&&e.brush.updateResize():e.axis&&e.axis.setOrient(),e.scale.zoom=null,t?e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withLegend:!0}):e.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1}),!i.resizing&&e.brush&&(e.brush.getSelection().call(e.brush.move),e.unselectRect())):e.initToRender(!0)},destroy:function(){var t=this,e=this.internal,i=e.$el,n=i.chart,a=i.svg;if(rt(e))for(var r in e.callPluginHook("$willDestroy"),e.charts.splice(e.charts.indexOf(this),1),a.select("*").interrupt(),e.resizeFunction.clear(),H.removeEventListener("resize",e.resizeFunction),n.classed("bb",!1).html(""),Object.keys(this).forEach((function(i){"internal"===i&&Object.keys(e).forEach((function(t){e[t]=null})),t[i]=null,delete t[i]})),this)this[r]=function(){};return null},config:function(t,e,i){var n,a=this.internal.config,r=t&&t.replace(/\./g,"_");return r in a&&(q(e)?(a[r]=e,n=e,i&&this.flush()):n=a[r]),n}};function _e(t){var e=this.internal.data.targets;if(!K(t)){var i=st(t)?t:[t];return e.filter((function(t){return i.some((function(e){return e===t.id}))}))}return e}mt(_e,{shown:function(t){return this.internal.filterTargetsToShow(this.data(t))},values:function(t,e){void 0===e&&(e=!0);var i=null;if(t){var n=this.data(t);n&&st(n)&&(i=[],n.forEach((function(t){var n=t.values.map((function(t){return t.value}));e?i=i.concat(n):i.push(n)})))}return i},names:function(t){return this.internal.updateDataAttributes("names",t)},colors:function(t){return this.internal.updateDataAttributes("colors",t)},axes:function(t){return this.internal.updateDataAttributes("axes",t)},min:function(){return this.internal.getMinMaxData().min},max:function(){return this.internal.getMinMaxData().max}});var me={data:_e};function ye(t,e){var i=new XMLSerializer,n=t.cloneNode(!0),a=function(t){var e=[];return t.forEach((function(t){try{t.cssRules&&t.cssRules.length&&(e=e.concat(bt(t.cssRules)))}catch(i){console.error("Error while reading rules from "+t.href+": "+i.toString())}})),e}(bt(G.styleSheets)).filter((function(t){return t.cssText})).map((function(t){return t.cssText}));n.setAttribute("xmlns",o.a.xhtml);var r=i.serializeToString(n),s=G.createElement("style");s.appendChild(G.createTextNode(a.join("\n")));var c=i.serializeToString(s),l=('<svg xmlns="'+o.a.svg+'" width="'+e.width+'" height="'+e.height+'">\n\t\t\t<foreignObject width="100%" height="100%">\n\t\t\t\t'+c+"\n\t\t\t\t"+r.replace(/(url\()[^#]+/g,"$1")+"\n\t\t\t</foreignObject></svg>").replace("/\n/g","%0A");return"data:image/svg+xml;base64,"+btoa(encodeURIComponent(l).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))})))}var be={export:function(t,e){var i=this,n=this.internal,a=n.state,r=n.$el.chart,s=a.current,o=s.width,c=s.height,l=ye(r.node(),{width:o,height:c});if(e&&U(e)){var u=new Image;u.crossOrigin="Anonymous",u.onload=function(){var n=G.createElement("canvas"),a=n.getContext("2d");n.width=o,n.height=c,a.drawImage(u,0,0),e.bind(i)(n.toDataURL(t))},u.src=l}return l}},Te={focus:function(t){var e=this.internal,i=e.state,n=e.mapToTargetIds(t),a=e.$el.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),a.classed(X.focused,!0).classed(X.defocused,!1),e.hasArcType()&&!i.hasRadar&&(e.expandArc(n),e.hasType("gauge")&&e.markOverlapped(t,e,"."+X.gaugeValue)),e.toggleFocusLegend(n,!0),i.focusedTargetIds=n,i.defocusedTargetIds=i.defocusedTargetIds.filter((function(t){return n.indexOf(t)<0}))},defocus:function(t){var e=this.internal,i=e.state,n=e.mapToTargetIds(t);e.$el.svg.selectAll(e.selectorTargets(n.filter(e.isTargetToShow,e))).classed(X.focused,!1).classed(X.defocused,!0),e.hasArcType()&&(e.unexpandArc(n),e.hasType("gauge")&&e.undoMarkOverlapped(e,"."+X.gaugeValue)),e.toggleFocusLegend(n,!1),i.focusedTargetIds=i.focusedTargetIds.filter((function(t){return n.indexOf(t)<0})),i.defocusedTargetIds=n},revert:function(t){var e=this.internal,i=e.config,n=e.state,a=e.$el,s=e.mapToTargetIds(t);a.svg.selectAll(e.selectorTargets(s)).classed(X.focused,!1).classed(X.defocused,!1),e.hasArcType()&&e.unexpandArc(s),i.legend_show&&(e.showLegend(s.filter(e.isLegendToShow.bind(e))),a.legend.selectAll(e.selectorLegends(s)).filter((function(){return Object(r.a)(this).classed(X.legendItemFocused)})).classed(X.legendItemFocused,!1)),n.focusedTargetIds=[],n.defocusedTargetIds=[]}},we={legend:{show:function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},hide:function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})}}},Ae={load:function(t){var e=this.internal,i=e.config;t.xs&&e.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach((function(e){i.data_classes[e]=t.classes[e]})),"categories"in t&&e.axis.isCategorized()&&(i.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach((function(e){i.data_axes[e]=t.axes[e]})),"colors"in t&&Object.keys(t.colors).forEach((function(e){i.data_colors[e]=t.colors[e]})),"unload"in t&&!1!==t.unload?e.unload(e.mapToTargetIds(!0===t.unload?null:t.unload),(function(){return e.loadFromArgs(t)})):e.loadFromArgs(t)},unload:function(t){var e=this,i=this.internal,n=t||{};st(n)?n={ids:n}:Z(n)&&(n={ids:[n]});var a=i.mapToTargetIds(n.ids);i.unload(a,(function(){i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.cache.remove(a),n.done&&n.done.call(e)}))}};function ke(t,e,i){var n=this.internal,a=n.mapToTargetIds(e);n.state.toggling=!0,n[(t?"remove":"add")+"HiddenTargetIds"](a);var r=n.$el.svg.selectAll(n.selectorTargets(a)),s=t?"1":"0";t&&r.style("display",null),r.transition().style("opacity",s,"important").call(ut,(function(){!t&&r.style("display","none"),r.style("opacity",s)})),i.withLegend&&n[(t?"show":"hide")+"Legend"](a),n.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),n.state.toggling=!1}var Le={show:function(t,e){void 0===e&&(e={}),ke.call(this,!0,t,e)},hide:function(t,e){void 0===e&&(e={}),ke.call(this,!1,t,e)},toggle:function(t,e){var i=this;void 0===e&&(e={});var n=this.internal,a={show:[],hide:[]};n.mapToTargetIds(t).forEach((function(t){return a[n.isTargetToShow(t)?"hide":"show"].push(t)})),a.show.length&&this.show(a.show,e),a.hide.length&&setTimeout((function(){return i.hide(a.hide,e)}),0)}},Se={tooltip:{show:function(t){var e,i,n=this.internal,a=n.config,r=n.state.inputType;if(t.mouse&&(i=t.mouse),t.data){var s=t.data,o=n.getYScaleById(s.id)(s.value);n.isMultipleX()?i=[n.scale.x(s.x),o]:(a.tooltip_grouped||(i=[0,o]),e=W(s.index)?s.index:n.getIndexByX(s.x))}else q(t.x)?e=n.getIndexByX(t.x):q(t.index)&&(e=t.index);("mouse"===r?["mouseover","mousemove"]:["touchstart"]).forEach((function(t){n.dispatchEvent(t,e,i)}))},hide:function(){var t=this.internal,e=t.state.inputType,i=t.$el.tooltip,n=i&&i.datum();if(n){var a=JSON.parse(n.current)[0].index;("mouse"===e?["mouseout"]:["touchend"]).forEach((function(e){t.dispatchEvent(e,a)}))}"touch"===e&&t.callOverOutForTouch(),t.hideTooltip(!0),t.hideGridFocus(),t.unexpandCircles&&t.unexpandCircles(),t.unexpandBars&&t.unexpandBars()}}},Oe=function t(e){this.plugins=[];var i=new pe(this);this.internal=i,function t(e,i,n){Object.keys(e).forEach((function(a){var r=U(e[a]),s=i!==n,o=Object.keys(e[a]).length>0;r&&(!s&&o||s)?i[a]=e[a].bind(n):r||(i[a]={}),o&&t(e[a],i[a],n)}))}(t.prototype,this,this),xe.call(i,e),i.beforeInit(),i.init()};function Ee(t,e,i){var n=t.config,a="axis_x_"+e,r="axis_y_"+e,s="axis_y2_"+e;q(i)&&(nt(i)?(W(i.x)&&(n[a]=i.x),W(i.y)&&(n[r]=i.y),W(i.y2)&&(n[s]=i.y2)):(n[r]=i,n[s]=i),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))}function Ce(t,e){var i=t.config;return{x:i["axis_x_"+e],y:i["axis_y_"+e],y2:i["axis_y2_"+e]}}mt(Oe.prototype,[ve,{color:function(t){return this.internal.color(t)}},me,be,Te,we,Ae,Le,Se]);var Ie={axis:{labels:function(t){var e,i=this.internal;return t&&(Object.keys(t).forEach((function(e){i.axis.setLabelText(e,t[e])})),i.axis.updateLabels()),["x","y","y2"].forEach((function(t){var n=i.axis.getLabelText(t);n&&(!e&&(e={}),e[t]=n)})),e},min:function(t){var e=this.internal;return W(t)?Ee(e,"min",t):Ce(e,"min")},max:function(t){var e=this.internal;return arguments.length?Ee(e,"max",t):Ce(e,"max")},range:function(t){var e=this.axis;if(!arguments.length)return{max:e.max(),min:e.min()};q(t.max)&&e.max(t.max),q(t.min)&&e.min(t.min)}}};function Re(t){var e=this.internal,i=e.config;return t?(i.grid_x_lines=t,e.redrawWithoutRescale(),i.grid_x_lines):i.grid_x_lines}mt(Re,{add:function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!0)}});var Xe={xgrids:Re};function De(t){var e=this.internal,i=e.config;return t?(i.grid_y_lines=t,e.redrawWithoutRescale(),i.grid_y_lines):i.grid_y_lines}mt(De,{add:function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},remove:function(t){this.internal.removeGridLines(t,!1)}});var Fe={ygrids:De},ze={groups:function(t){var e=this.internal,i=e.config;return K(t)||(i.data_groups=t,e.redraw()),i.data_groups}};function Pe(t){var e=this.internal,i=e.config;return t?(i.regions=t,e.redrawWithoutRescale(),t):i.regions}mt(Pe,{add:function(t){var e=this.internal,i=e.config;return t?(i.regions=i.regions.concat(t),e.redrawWithoutRescale(),i.regions):i.regions},remove:function(t){var e=this.internal,i=e.config,n=t||{},a=ct(n,"duration",i.transition_duration),r=ct(n,"classes",[X.region]),s=e.$el.main.select("."+X.regions).selectAll(r.map((function(t){return"."+t})));return(a?s.transition().duration(a):s).style("opacity","0").remove(),s=i.regions,Object.keys(n).length?(s=s.filter((function(t){var e=!1;return!t.class||(t.class.split(" ").forEach((function(t){r.indexOf(t)>=0&&(e=!0)})),!e)})),i.regions=s):i.regions=[],s}});var Me={regions:Pe},Be={x:function(t){var e=this.internal,i=e.axis,n=e.data,a=i.isCustomX()&&i.isCategorized();return st(t)&&(a?this.categories(t):(e.updateTargetX(n.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0}))),a?this.categories():n.xs},xs:function(t){var e=this.internal;return ot(t)&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}},$e={flow:function(t){var e,i,n,a,r=this.internal,s=0,o=0;if((t.json||t.rows||t.columns)&&(e=r.convertData(t)),e&&It()){var c=[],l=r.getMaxDataCount(),u=r.convertDataToTargets(e,!0),d=r.axis.isTimeSeries();r.data.targets.forEach((function(t){for(var e=!1,i=0;i<u.length;i++)if(t.id===u[i].id){e=!0,t.values[t.values.length-1]&&(o=t.values[t.values.length-1].index+1),s=u[i].values.length;for(var n=0;n<s;n++)u[i].values[n].index=o+n,d||(u[i].values[n].x=o+n);t.values=t.values.concat(u[i].values),u.splice(i,1);break}!e&&c.push(t.id)})),r.data.targets.forEach((function(t){for(var e=0;e<c.length;e++)if(t.id===c[e]){o=t.values[t.values.length-1].index+1;for(var i=0;i<s;i++)t.values.push({id:t.id,index:o+i,x:d?r.getOtherTargetX(o+i):o+i,value:null})}})),r.data.targets.length&&u.forEach((function(t){for(var e=[],i=r.data.targets[0].values[0].index;i<o;i++)e.push({id:t.id,index:i,x:d?r.getOtherTargetX(i):i,value:null});t.values.forEach((function(t){t.index+=o,d||(t.x+=o)})),t.values=e.concat(t.values)})),r.data.targets=r.data.targets.concat(u);var h=r.data.targets[0],g=h.values[0];q(t.to)?(s=0,a=d?Ct.call(r,t.to):t.to,h.values.forEach((function(t){t.x<a&&s++}))):q(t.length)&&(s=t.length),l?1===l&&d&&(n=(h.values[h.values.length-1].x-g.x)/2,i=[new Date(+g.x-n),new Date(+g.x+n)]):(n=d?h.values.length>1?h.values[h.values.length-1].x-g.x:g.x-r.getXDomain(r.data.targets)[0]:1,i=[g.x-n,g.x]),i&&r.updateXDomain(null,!0,!0,!1,i),r.updateTargets(r.data.targets),r.redraw({flow:{index:g.index,length:s,duration:W(t.duration)?t.duration:r.config.transition_duration,done:t.done,orgDataCount:l},withLegend:!0,withTransition:l>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}},Ye=function(){function t(t){var e=re(),i=t.config,n=t.params;this.owner=t,this.config=i,this.scale=e,!i.noTransition&&n.config.transition_duration||(i.withoutTransition=!0),i.range=this.scaleExtent((n.orgXScale||e).range())}return t.getSizeFor1Char=function(t){var e={w:5.5,h:11.5};return!t.empty()&&t.select("text").text("0").call((function(t){try{var i=t.node().getBBox(),n=i.width,a=i.height;n&&a&&(e.w=n,e.h=a)}catch(r){}finally{t.text("")}})),this.getSizeFor1Char=function(){return e},e},t.prototype.getTickTransformSetter=function(t){var e=this.config,i="x"===t?function(t){return"translate("+(t+e.tickOffset)+",0)"}:function(t){return"translate(0,"+t+")"};return function(t,e){t.attr("transform",(function(t){return i(Math.ceil(e(t)))}))}},t.prototype.scaleExtent=function(t){var e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]},t.prototype.generateTicks=function(t,e){var i=this.owner.params.tickStepSize,n=t.domain(),a=n[0],r=n[1],s=[];if(e&&i)for(var o=a;o<=r;)s.push(o),o+=i;else if(t.ticks){var c=this.config.tickArguments;if("log"!==t.type||c)s=t.ticks.apply(t,this.config.tickArguments||[]);else{var l=re("_log").domain([a>0?a:1,r]).range(t.range());s=l.ticks();for(var u=r.toFixed().length;s.length>15;u--)s=l.ticks(u);s.splice(0,1,a),s.splice(s.length-1,1,r)}s=s.map((function(t){return Z(t)&&J(t)&&!isNaN(t)&&Math.round(10*t)/10||t}))}else{for(var d=Math.ceil(a);d<r;d++)s.push(d);s.length>0&&s[0]>0&&s.unshift(s[0]-(s[1]-s[0]))}return s},t.prototype.copyScale=function(){var t=this.scale.copy();return t.domain().length||t.domain(this.scale.domain()),t.type=this.scale.type,t},t.prototype.textFormatted=function(t){var e=this.config.tickFormat,i=/\d+\.\d+0{5,}\d$/.test(t)?+String(t).replace(/0+\d$/,""):t,n=e?e(i):i;return q(n)?n:""},t.prototype.transitionise=function(t){var e=this.config;return e.withoutTransition?t.interrupt():t.transition(e.transition)},t}(),Ne=function(){function t(t){void 0===t&&(t={});var e={innerTickSize:6,outerTickSize:t.outerTick?6:0,orient:"bottom",range:[],tickArguments:null,tickCentered:null,tickCulling:!0,tickFormat:null,tickLength:9,tickOffset:0,tickPadding:3,tickValues:null,transition:null,noTransition:t.noTransition};e.tickLength=Math.max(e.innerTickSize,0)+e.tickPadding,this.config=e,this.params=t,this.helper=new Ye(this)}return t.prototype.create=function(t){var e=this,i=this,n=i.config,a=i.helper,s=i.params,o=a.scale,c=n.orient,l=this.splitTickText.bind(this),u=/^(left|right)$/.test(c),d=/^(top|bottom)$/.test(c),h=a.getTickTransformSetter(d?"x":"y"),g=h===a.axisX?"y":"x",f=/^(top|left)$/.test(c)?-1:1,p=s.tickTextRotate;this.config.range=o.rangeExtent?o.rangeExtent():a.scaleExtent((s.orgXScale||o).range());var x,v=n.innerTickSize,_=n.tickLength,m=n.range,y=s.id,b=y&&/^(x|y|y2)$/.test(y)?s.config["axis_"+y+"_tick_text_position"]:{x:0,y:0},T="subX"===y?"subchart_axis_x":"axis_"+y,w=s.config[T+"_show"],A=!!w&&s.config[T+"_tick_show"],k=!!w&&s.config[T+"_tick_text_show"];t.each((function(){var t=Object(r.a)(this),i=this.__chart__||o,y=a.copyScale();x=t,this.__chart__=y,n.tickOffset=s.isCategory?Math.ceil((y(1)-y(0))/2):0;var T=t.selectAll(".domain").data([0]);if(T.enter().append("path").attr("class","domain").merge(a.transitionise(T)).attr("d",(function(){var t=n.outerTickSize*f;return d?"M"+m[0]+","+t+"V0H"+m[1]+"V"+t:"M"+t+","+m[0]+"H0V"+m[1]+"H"+t})),A||k){var w=n.tickValues||a.generateTicks(y,u),L=t.selectAll(".tick").data(w,y),S=L.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),O=L.exit().remove();L=S.merge(L),A&&S.append("line"),k&&S.append("text");var E=Ye.getSizeFor1Char(L),C=[],I=L.select("text").selectAll("tspan").data((function(t,e){var i=s.tickMultiline?l(t,y,w,u,E.w):st(a.textFormatted(t))?a.textFormatted(t).concat():[a.textFormatted(t)];return C[e]=i.length,i.map((function(t){return{index:e,splitted:t}}))}));I.exit().remove(),(I=I.enter().append("tspan").merge(I).text((function(t){return t.splitted}))).attr("x",d?0:_*f).attr("dx",function(){var t=0;return/(top|bottom)/.test(c)&&p&&(t=8*Math.sin(Math.PI*(p/180))*("top"===c?-1:1)),t+(b.x||0)}()).attr("dy",(function(t,e){var i=".71em",n=0;return"top"!==c&&(n=E.h,0===e&&(n=u?-((C[t.index]-1)*(E.h/2)-3):0===b.y?i:0)),J(n)&&b.y?n+b.y:n||i}));var R=L.select("line"),X=L.select("text");if(S.select("line").attr(g+"2",v*f),S.select("text").attr(g,_*f),e.setTickLineTextPosition(R,X),s.tickTitle){var D=X.select("title");(D.empty()?X.append("title"):D).text((function(t){return s.tickTitle[t]}))}if(y.bandwidth){var F=y,z=F.bandwidth()/2;y=i=function(t){return F(t)+z}}else i.bandwidth?i=y:h(O,y);h(S,i),h(a.transitionise(L).style("opacity","1"),y)}})),this.g=x},t.prototype.getTickXY=function(){var t=this.config,e={x:0,y:0};return this.params.isCategory&&(e.x=t.tickCentered?0:t.tickOffset,e.y=t.tickCentered?t.tickOffset:0),e},t.prototype.getTickSize=function(t){var e=this.helper.scale,i=this.config,n=i.innerTickSize,a=i.range,r=e(t)+(i.tickCentered?0:i.tickOffset);return a[0]<r&&r<a[1]?n:0},t.prototype.setTickLineTextPosition=function(t,e){var i=this.getTickXY(),n=this.config,a=n.innerTickSize,r=n.orient,s=n.tickLength,o=n.tickOffset,c=this.params.tickTextRotate,l=function(t){var e=["start","end"];return"top"===r&&e.reverse(),t?t>0?e[0]:e[1]:"middle"},u=function(t){return t?"rotate("+t+")":null},d=function(t){return t?11.5-2.5*(t/("bottom"===r?15:23))*(t>0?1:-1):s};switch(r){case"bottom":t.attr("x1",i.x).attr("x2",i.x).attr("y2",this.getTickSize.bind(this)),e.attr("x",0).attr("y",d(c)).style("text-anchor",l(c)).attr("transform",u(c));break;case"top":t.attr("x2",0).attr("y2",-a),e.attr("x",0).attr("y",2*-d(c)).style("text-anchor",l(c)).attr("transform",u(c));break;case"left":t.attr("x2",-a).attr("y1",i.y).attr("y2",i.y),e.attr("x",-s).attr("y",o).style("text-anchor","end");break;case"right":t.attr("x2",a).attr("y2",0),e.attr("x",s).attr("y",0).style("text-anchor","start")}},t.prototype.splitTickText=function(t,e,i,n,a){var r=this.params,s=this.helper.textFormatted(t),o=Z(s)&&s.indexOf("\n")>-1?s.split("\n"):[];if(o.length)return o;if(st(s))return s;var c=r.tickWidth;return(!c||c<=0)&&(c=n?95:r.isCategory?Math.ceil(e(i[1])-e(i[0]))-12:110),function t(e,i){for(var n,r,s,o=1;o<i.length;o++)if(" "===i.charAt(o)&&(r=o),n=i.substr(0,o+1),s=a*n.length,c<s)return t(e.concat(i.substr(0,r||o)),i.slice(r?r+1:o));return e.concat(i)}(o,String(s))},t.prototype.scale=function(t){return arguments.length?(this.helper.scale=t,this):this.helper.scale},t.prototype.orient=function(t){return arguments.length?(this.config.orient=t in{top:1,right:1,bottom:1,left:1}?String(t):"bottom",this):this.config.orient},t.prototype.tickFormat=function(t){var e=this.config;return arguments.length?(e.tickFormat=t,this):e.tickFormat},t.prototype.tickCentered=function(t){var e=this.config;return arguments.length?(e.tickCentered=t,this):e.tickCentered},t.prototype.tickOffset=function(){return this.config.tickOffset},t.prototype.tickInterval=function(t){var e,i=this;if(this.params.isCategory)e=2*this.config.tickOffset;else{e=(this.g.select("path.domain").node().getTotalLength()-2*this.config.outerTickSize)/(t||this.g.selectAll("line").size());var n=this.config.tickValues.map((function(t,e,n){var a=e+1;return a<n.length?i.helper.scale(n[a])-i.helper.scale(t):null})).filter(Boolean);e=Math.min.apply(Math,P(P([],n),[e]))}return e===1/0?0:e},t.prototype.ticks=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.config;return t.length?(i.tickArguments=bt(t),this):i.tickArguments},t.prototype.tickCulling=function(t){var e=this.config;return arguments.length?(e.tickCulling=t,this):e.tickCulling},t.prototype.tickValues=function(t){var e=this,i=this.config;if(U(t))i.tickValues=function(){return t(e.helper.scale.domain())};else{if(!arguments.length)return i.tickValues;i.tickValues=t}return this},t.prototype.setTransition=function(t){return this.config.transition=t,this},t}(),Ve={getAxisInstance:function(){return this.axis||new je(this)}},je=function(){function t(t){this.axesList={},this.tick={x:null,y:null,y2:null},this.xs=[],this.orient={x:"bottom",y:"left",y2:"right",subX:"bottom"},this.owner=t,this.setOrient()}return t.prototype.getAxisClassName=function(t){return X.axis+" "+X["axis"+yt(t)]},t.prototype.isHorizontal=function(t,e){var i=t.config.axis_rotated;return e?i:!i},t.prototype.isCategorized=function(){var t=this.owner,e=t.config,i=t.state;return e.axis_x_type.indexOf("category")>=0||i.hasRadar},t.prototype.isCustomX=function(){var t=this.owner.config;return!this.isTimeSeries()&&(t.data_x||rt(t.data_xs))},t.prototype.isTimeSeries=function(t){return void 0===t&&(t="x"),"timeseries"===this.owner.config["axis_"+t+"_type"]},t.prototype.isLog=function(t){return void 0===t&&(t="x"),"log"===this.owner.config["axis_"+t+"_type"]},t.prototype.isTimeSeriesY=function(){return this.isTimeSeries("y")},t.prototype.getAxisType=function(t){void 0===t&&(t="x");var e="linear";return this.isTimeSeries(t)?e="time":this.isLog(t)&&(e="log"),e},t.prototype.init=function(){var t=this,e=this.owner,i=e.config,n=e.$el,a=n.main,r=n.axis,s=e.state.clip,o=i.axis_rotated,c=["x","y"];i.axis_y2_show&&c.push("y2"),c.forEach((function(n){var c=t.getAxisClassName(n),l=X["axis"+n.toUpperCase()+"Label"];r[n]=a.append("g").attr("class",c).attr("clip-path",(function(){var t=null;return"x"===n?t=s.pathXAxis:"y"===n&&(t=s.pathYAxis),t})).attr("transform",e.getTranslate(n)).style("visibility",i["axis_"+n+"_show"]?"visible":"hidden"),r[n].append("text").attr("class",l).attr("transform",["rotate(-90)",null]["x"===n?+!o:+o]).style("text-anchor",(function(){return t.textAnchorForAxisLabel(n)})),t.generateAxes(n)}))},t.prototype.setOrient=function(){var t=this.owner.config,e=t.axis_rotated,i=t.axis_y_inner,n=t.axis_y2_inner;this.orient={x:e?"left":"bottom",y:e?i?"top":"bottom":i?"right":"left",y2:e?n?"bottom":"top":n?"left":"right",subX:e?"left":"bottom"}},t.prototype.generateAxes=function(t){var e,i=this.owner,n=i.config,a=[],r=n["axis_"+t+"_axes"],s=n.axis_rotated;"x"===t?e=s?C.b:C.a:"y"===t?e=s?C.a:C.b:"y2"===t&&(e=s?C.d:C.c),r.length&&r.forEach((function(n){var r=n.tick||{},s=i.scale[t].copy();n.domain&&s.domain(n.domain),a.push(e(s).ticks(r.count).tickFormat(U(r.format)?r.format.bind(i.api):function(t){return t}).tickValues(r.values).tickSizeOuter(!1===r.outer?0:6))})),this.axesList[t]=a},t.prototype.updateAxes=function(){var t=this,e=this.owner,i=e.config,n=e.$el.main;Object.keys(this.axesList).forEach((function(a){var r=i["axis_"+a+"_axes"],s=e.scale[a].copy(),o=s.range();t.axesList[a].forEach((function(c,l){var u=c.scale().range();o.every((function(t,e){return t===u[e]}))||c.scale().range(o);var d=t.getAxisClassName(a)+"-"+(l+1),h=n.select("."+d.replace(/\s/,"."));h.empty()?h=n.append("g").attr("class",d).style("visibility",i["axis_"+a+"_show"]?"visible":"hidden").call(c):(r[l].domain&&s.domain(r[l].domain),t.x.helper.transitionise(h).call(c.scale(s))),h.attr("transform",e.getTranslate(a,l+1))}))}))},t.prototype.setAxis=function(t,e,i,n){var a=this.owner;"subX"!==t&&(this.tick[t]=this.getTickValues(t)),this[t]=this.getAxis(t,e,i,!("x"!==t||!(a.scale.zoom||a.config.subchart_show||a.state.resizing))||n)},t.prototype.getAxis=function(t,e,i,n,a){var r,s=this.owner,o=s.config,c=/^(x|subX)$/.test(t),l=c?"x":t,u=c&&this.isCategorized(),d=this.orient[t],h=a?0:s.getAxisTickRotate(l);if(c)r=s.format.xAxisTick;else{var g=o["axis_"+t+"_tick_format"];U(g)&&(r=g.bind(s.api))}var f=this.tick[l],p=kt({outerTick:i,noTransition:n,config:o,id:t,tickTextRotate:h},c&&{isCategory:u,tickMultiline:o.axis_x_tick_multiline,tickWidth:o.axis_x_tick_width,tickTitle:u&&o.axis_x_tick_tooltip&&s.api.categories(),orgXScale:s.scale.x});c||(p.tickStepSize=o["axis_"+l+"_tick_stepSize"]);var x=new Ne(p).scale(c&&s.scale.zoom||e).orient(d);if(c&&this.isTimeSeries()&&f&&!U(f)){var v=Ct.bind(s);f=f.map((function(t){return v(t)}))}else!c&&this.isTimeSeriesY()&&(x.ticks(o.axis_y_tick_time_value),f=null);f&&x.tickValues(f),x.tickFormat(r||!c&&s.isStackNormalized()&&function(t){return t+"%"}),u&&(x.tickCentered(o.axis_x_tick_centered),at(o.axis_x_tick_culling)&&(o.axis_x_tick_culling=!1));var _=o["axis_"+l+"_tick_count"];return _&&x.ticks(_),x},t.prototype.updateXAxisTickValues=function(t,e){var i,n=this.owner,a=n.config,r=a.axis_x_tick_fit,s=a.axis_x_tick_count;return(r||s&&r)&&(i=n.mapTargetsToUniqueXs(t),this.isCategorized()&&s>i.length&&(s=i.length),i=this.generateTickValues(i,s,this.isTimeSeries())),e?e.tickValues(i):this.x&&(this.x.tickValues(i),this.subX&&this.subX.tickValues(i)),i},t.prototype.getId=function(t){var e=this.owner,i=e.config,n=e.scale,a=i.data_axes[t];return a&&n[a]||(a="y"),a},t.prototype.getXAxisTickFormat=function(){var t,e=this.owner,i=e.config,n=e.format,a=i.axis_x_tick_format,r=this.isTimeSeries(),s=this.isCategorized();return a?U(a)?t=a.bind(e.api):r&&(t=function(t){return t?n.axisTime(a)(t):""}):t=r?n.defaultAxisTime:s?e.categoryName:function(t){return t<0?t.toFixed(0):t},U(t)?function(i){return t.apply(e,s?[i,e.categoryName(i)]:[i])}:t},t.prototype.getTickValues=function(t){var e=this.owner,i=e.config["axis_"+t+"_tick_values"],n=e[t+"Axis"];return(U(i)?i.call(e.api):i)||(n?n.tickValues():void 0)},t.prototype.getLabelOptionByAxisId=function(t){return this.owner.config["axis_"+t+"_label"]},t.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return Z(e)?e:e?e.text:null},t.prototype.setLabelText=function(t,e){var i=this.owner.config,n=this.getLabelOptionByAxisId(t);Z(n)?i["axis_"+t+"_label"]=e:n&&(n.text=e)},t.prototype.getLabelPosition=function(t,e){var i=this.owner.config.axis_rotated,n=this.getLabelOptionByAxisId(t),a=nt(n)&&n.position?n.position:e[+!i],r=function(t){return!!~a.indexOf(t)};return{isInner:r("inner"),isOuter:r("outer"),isLeft:r("left"),isCenter:r("center"),isRight:r("right"),isTop:r("top"),isMiddle:r("middle"),isBottom:r("bottom")}},t.prototype.getAxisLabelPosition=function(t){return this.getLabelPosition(t,"x"===t?["inner-top","inner-right"]:["inner-right","inner-top"])},t.prototype.getLabelPositionById=function(t){return this.getAxisLabelPosition(t)},t.prototype.xForAxisLabel=function(t){var e=this.owner,i=e.state,n=i.width,a=i.height,r=this.getAxisLabelPosition(t),s=r.isMiddle?-a/2:0;return this.isHorizontal(e,"x"!==t)?s=r.isLeft?0:r.isCenter?n/2:n:r.isBottom&&(s=-a),s},t.prototype.dxForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isBottom?"0.5em":"0";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"0.5em":i.isRight?"-0.5em":"0":i.isTop&&(n="-0.5em"),n},t.prototype.textAnchorForAxisLabel=function(t){var e=this.owner,i=this.getAxisLabelPosition(t),n=i.isMiddle?"middle":"end";return this.isHorizontal(e,"x"!==t)?n=i.isLeft?"start":i.isCenter?"middle":"end":i.isBottom&&(n="start"),n},t.prototype.dyForAxisLabel=function(t){var e,i=this.owner,n=i.config,a=n.axis_rotated,r=this.getAxisLabelPosition(t).isInner,s=n["axis_"+t+"_tick_rotate"]?i.getHorizontalAxisHeight(t):0,o=this.getMaxTickWidth(t);if("x"===t){var c=n.axis_x_height;e=a?r?"1.2em":-25-o:r?"-0.5em":c?c-10:s?s-10:"3em"}else e={y:["-0.5em",10,"3em","1.2em",10],y2:["1.2em",-20,"-2.2em","-0.5em",15]}[t],e=a?r?e[0]:s?s*("y2"===t?-1:1)-e[1]:e[2]:r?e[3]:(e[4]+(n["axis_"+t+"_inner"]?0:o+e[4]))*("y"===t?-1:1);return e},t.prototype.getMaxTickWidth=function(t,e){var i=this.owner,n=i.config,a=i.state.current,r=i.$el,s=r.svg,o=r.chart,c=a.maxTickWidths[t],l=0;if(e||!n["axis_"+t+"_show"]||0===i.filterTargetsToShow().length)return c.size;if(s){var u=/^y2?$/.test(t),d=i.filterTargetsToShow(i.data.targets),h=i.scale[t].copy().domain(i["get"+(u?"Y":"X")+"Domain"](d,t)),g=h.domain(),f=g[0]===g[1]&&g.every((function(t){return t>0})),p=st(c.domain)&&c.domain[0]===c.domain[1]&&c.domain.every((function(t){return t>0}));if(f||p)return c.size;c.domain=g,u||c.ticks.splice(0);var x=this.getAxis(t,h,!1,!1,!0),v=n["axis_"+t+"_tick_count"];!n["axis_"+t+"_tick_values"]&&v&&x.tickValues(this.generateTickValues(g,v,u?this.isTimeSeriesY():this.isTimeSeries())),!u&&this.updateXAxisTickValues(d,x);var _=o.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px");x.create(_),_.selectAll("text").each((function(t,e){var i=this.getBoundingClientRect().width;l=Math.max(l,i),u||(c.ticks[e]=i)})),_.remove()}return l>0&&(c.size=l),c.size},t.prototype.getXAxisTickTextY2Overflow=function(t){var e=this.owner,i=e.axis,n=e.config,a=e.state,r=e.getAxisTickRotate("x"),s=r>0&&r<90;if((i.isCategorized()||i.isTimeSeries())&&n.axis_x_tick_fit&&!n.axis_x_tick_culling&&!n.axis_x_tick_multiline&&s){var o=a.current.width-e.getCurrentPaddingLeft(),c=this.getXAxisTickMaxOverflow(r,o-t),l=Math.max(0,c)+t;return Math.min(l,o/2)}return 0},t.prototype.getXAxisTickMaxOverflow=function(t,e){for(var i=this.owner,n=i.axis,a=i.config,r=i.state,s=n.isTimeSeries(),o=r.current.maxTickWidths.x.ticks,c=o.length,l=r.axis.x.padding,u=l.left,d=l.right,h=0,g=c-(s&&a.axis_x_tick_fit?.5:0),f=0;f<c;f++){var p=f+1,x=Math.cos(Math.PI*t/180)*o[f],v=p-(s?1:.5)+u;if(!(v<=0)){var _=(e-x)/v,m=x-_/2-((g-p)*_+d*_);h=Math.max(h,m)}}var y=i.filterTargetsToShow(i.data.targets),b=0;if(!s&&a.axis_x_tick_count<=y.length&&y[0].values.length){var T=re(i.axis.getAxisType("x"),0,e-h).domain([-1*u,i.getXDomainMax(i.data.targets)+1+d]);b=Math.ceil((T(1)-T(0))/2)}return h+b},t.prototype.getXAxisPadding=function(t){var e=this.owner,i=e.config.axis_x_padding;if(at(i)?i={left:0,right:0}:(i.left=i.left||0,i.right=i.right||0),e.axis.isTimeSeries()){var n=+e.getXDomainMin(e.data.targets),a=+e.getXDomainMax(e.data.targets)-n,r=a+i.left+i.right,s=0,o=0;if(t&&r){var c=a/t/r;s=i.left/r/c,o=i.right/r/c}i={left:s,right:o}}return i},t.prototype.updateLabels=function(t){var e=this,i=this.owner.$el.main,n={x:i.select("."+X.axisX+" ."+X.axisXLabel),y:i.select("."+X.axisY+" ."+X.axisYLabel),y2:i.select("."+X.axisY2+" ."+X.axisY2Label)};Object.keys(n).filter((function(t){return!n[t].empty()})).forEach((function(i){var a=n[i];(t?a.transition():a).attr("x",(function(){return e.xForAxisLabel(i)})).attr("dx",(function(){return e.dxForAxisLabel(i)})).attr("dy",(function(){return e.dyForAxisLabel(i)})).text((function(){return e.getLabelText(i)}))}))},t.prototype.getPadding=function(t,e,i,n){var a=J(t)?t:t[e];return W(a)?this.convertPixelsToAxisPadding(a,n):i},t.prototype.convertPixelsToAxisPadding=function(t,e){var i=this.owner,n=i.config,a=i.state,r=a.width,s=a.height;return e*(t/(n.axis_rotated?r:s))},t.prototype.generateTickValues=function(t,e,i){var n=t;if(e){var a=U(e)?e():e;if(1===a)n=[t[0]];else if(2===a)n=[t[0],t[t.length-1]];else if(a>2){var r=this.isCategorized(),s=a-2,o=t[0],c=t[t.length-1],l=(c-o)/(s+1),u=void 0;n=[o];for(var d=0;d<s;d++)u=+o+l*(d+1),n.push(i?new Date(u):r?Math.round(u):u);n.push(c)}}return i||(n=n.sort((function(t,e){return t-e}))),n},t.prototype.generateTransitions=function(t){var e=this.owner.$el.axis,i=["x","y","y2","subX"].map((function(i){var n=e[i];return n&&t&&(n=n.transition().duration(t)),n}));return{axisX:i[0],axisY:i[1],axisY2:i[2],axisSubX:i[3]}},t.prototype.redraw=function(t,e,i){var n=this,a=this.owner,r=a.config,s=a.$el,o=e?"0":"1";["x","y","y2","subX"].forEach((function(e){var a=n[e],c=s.axis[e];a&&c&&(i||r.transition_duration||(a.config.withoutTransition=!0),c.style("opacity",o),a.create(t["axis"+yt(e)]))})),this.updateAxes()},t.prototype.redrawAxis=function(t,e,i,n,a){var r,s=this,o=this.owner,c=o.config,l=o.scale,u=o.$el,d=!!l.zoom;!d&&this.isCategorized()&&0===t.length&&l.x.domain([0,u.axis.x.selectAll(".tick").size()]),l.x&&t.length?(!d&&o.updateXDomain(t,e.UpdateXDomain,e.UpdateOrgXDomain,e.TrimXDomain),c.axis_x_tick_values||this.updateXAxisTickValues(t)):this.x&&(this.x.tickValues([]),this.subX&&this.subX.tickValues([])),c.zoom_rescale&&!n&&(r=l.x.orgDomain()),["y","y2"].forEach((function(e){var i=l[e];if(i){var n=c["axis_"+e+"_tick_values"],a=c["axis_"+e+"_tick_count"];if(i.domain(o.getYDomain(t,e,r)),!n&&a){var u=o.axis[e],d=i.domain();u.tickValues(s.generateTickValues(d,d.every((function(t){return 0===t}))?1:a,s.isTimeSeriesY()))}}})),this.redraw(i,o.hasArcType(),a),this.updateLabels(e.Transition),(e.UpdateXDomain||e.UpdateXAxis||e.Y)&&t.length&&this.setCulling(),e.Y&&(l.subY&&l.subY.domain(o.getYDomain(t,"y")),l.subY2&&l.subY2.domain(o.getYDomain(t,"y2")))},t.prototype.setCulling=function(){var t=this.owner,e=t.config,i=t.state,n=i.clip,a=i.current,r=t.$el;["subX","x","y","y2"].forEach((function(t){var i=r.axis[t],s="subX"===t?"x":t,o=e["axis_"+s+"_tick_culling"];if(i&&o){var c,l=i.selectAll(".tick text"),u=Lt(l.data()),d=u.length,h=e["axis_"+s+"_tick_culling_max"];if(d){for(var g=1;g<d;g++)if(d/g<h){c=g;break}l.each((function(t){this.style.display=u.indexOf(t)%c?"none":"block"}))}else l.style("display","block");if("x"===t){var f=a.maxTickWidths.x.clipPath?n.pathXAxisTickTexts:null;r.svg.selectAll("."+X.axisX+" .tick text").attr("clip-path",f)}}}))},t}(),He={initEventRect:function(){this.$el.main.select("."+X.chart).append("g").attr("class",X.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t=this,e=t.config,i=t.state,n=t.$el,a=t.isMultipleX();if(n.eventRect)t.updateEventRect(n.eventRect,!0);else{var r=t.$el.main.select("."+X.eventRects).style("cursor",e.zoom_enabled&&"drag"!==e.zoom_type?e.axis_rotated?"ns-resize":"ew-resize":null).classed(X.eventRectsMultiple,a).classed(X.eventRectsSingle,!a).selectAll("."+X.eventRect).data([0]).enter().append("rect");t.updateEventRect(r),a?t.generateEventRectsForMultipleXs(r):t.generateEventRectsForSingleX(r),r.call(t.getDraggableSelection()),n.eventRect=r,"touch"!==t.state.inputType||n.svg.on("touchstart.eventRect")||t.hasArcType()||t.bindTouchOnEventRect(a)}if(!a){var s=t.getMaxDataCountTarget();t.updateDataIndexByX(s),t.updateXs(s),t.updatePointClass&&t.updatePointClass(!0),i.eventReceiver.data=s}t.updateEventRectData()},bindTouchOnEventRect:function(t){var e,i=this,n=i.config,r=i.state,s=i.$el,o=s.eventRect,c=s.svg,l=function(){i.unselectRect(),i.callOverOutForTouch()},u=n.interaction_inputType_touch.preventDefault,d=Q(u)&&u||!1,h=!isNaN(u)&&u||null;o.on("touchstart",(function(){return i.updateEventRect()})).on("touchstart.eventRect touchmove.eventRect",(function(){var s=a.c;if(!o.empty()&&o.classed(X.eventRect)){if(r.dragging||r.flowing||i.hasArcType()||s.touches.length>1)return;!function(t){var i=t.type,a=t.changedTouches[0]["client"+(n.axis_rotated?"Y":"X")];"touchstart"===i?d?t.preventDefault():null!==h&&(e=a):"touchmove"===i&&(d||!0===e||null!==h&&Math.abs(e-a)>=h)&&(e=!0,t.preventDefault())}(s),function(e){if(t)i.selectRectForMultipleXs(e);else{var n=i.getDataIndexFromEvent(a.c);i.callOverOutForTouch(n),-1===n?i.unselectRect():i.selectRectForSingle(e,o,n)}}(o.node())}else l()}),!0).on("touchend.eventRect",(function(){!o.empty()&&o.classed(X.eventRect)&&(i.hasArcType()||!i.toggleShape||r.cancelClick)&&r.cancelClick&&(r.cancelClick=!1)}),!0),c.on("touchstart",(function(){var t=a.c.target;t&&t!==o.node()&&l()}))},updateEventRect:function(t,e){void 0===e&&(e=!1);var i=this.state,n=this.$el,a=i.eventReceiver,r=i.width,s=i.height,o=i.rendered,c=i.resizing,l=t||n.eventRect;(!o||c||e)&&(l.attr("x",0).attr("y",0).attr("width",r).attr("height",s),o||l.attr("class",X.eventRect)),a&&(a.rect=l.node().getBoundingClientRect())},updateEventRectData:function(){var t,e,i,n,a=this,r=a.config,s=a.scale,o=a.state,c=s.zoom||s.x,l=r.axis_rotated;if(a.isMultipleX())t=0,e=0,i=o.width,n=o.height;else{var u,d=void 0;if(a.axis.isCategorized())u=a.getEventRectWidth(),d=function(t){return c(t.x)-u/2};else{var h=function(t){var e=t.index;return{prev:a.getPrevX(e),next:a.getNextX(e)}};u=function(t){var e=h(t);return null===e.prev&&null===e.next?l?o.height:o.width:(null===e.prev&&(e.prev=c.domain()[0]),null===e.next&&(e.next=c.domain()[1]),Math.max(0,(c(e.next)-c(e.prev))/2))},d=function(t){var e=h(t),i=t.x;return null===e.prev&&null===e.next?0:(null===e.prev&&(e.prev=c.domain()[0]),(c(i)+c(e.prev))/2)}}t=l?0:d,e=l?d:0,i=l?o.width:u,n=l?u:o.height}var g=o.eventReceiver,f=function(t,e){return U(t)?t(e):t};g.coords.splice(g.data.length),g.data.forEach((function(a,r){g.coords[r]={x:f(t,a),y:f(e,a),w:f(i,a),h:f(n,a)}}))},selectRectForMultipleXs:function(t){var e=this,i=e.config,n=e.state,a=e.filterTargetsToShow(e.data.targets);if(!n.dragging&&!e.hasArcType(a)){var r=Object(s.a)(t),o=e.findClosestFromTargets(a,r);if(!n.mouseover||o&&o.id===n.mouseover.id||(i.data_onout.call(e.api,n.mouseover),n.mouseover=void 0),o){var c=(e.isBubbleType(o)||e.isScatterType(o)||!i.tooltip_grouped?[o]:e.filterByX(a,o.x)).map((function(t){return e.addName(t)}));e.showTooltip(c,t),e.expandCirclesBars(o.index,o.id,!0),e.showGridFocus(c),(e.isBarType(o.id)||e.dist(o,r)<i.point_sensitivity)&&(e.$el.svg.select("."+X.eventRect).style("cursor","pointer"),n.mouseover||(i.data_onover.call(e.api,o),n.mouseover=o))}else e.unselectRect()}},unselectRect:function(){var t=this,e=t.config,i=t.$el,n=i.bar,a=i.circle,r=i.tooltip;t.$el.svg.select("."+X.eventRect).style("cursor",null),t.hideGridFocus(),r&&(t.hideTooltip(),t._handleLinkedCharts(!1)),a&&!e.point_focus_only&&t.unexpandCircles(),n&&t.unexpandBars()},generateEventRectsForSingleX:function(t){var e=this,i=e.config,n=e.state,r=n.eventReceiver,o=t.style("cursor",i.data_selection_enabled&&i.data_selection_grouped?"pointer":null).on("click",(function(){var t=r.currentIdx,i=r.data[-1===t?e.getDataIndexFromEvent(a.c):t];e.clickHandlerForSingleX.bind(this)(i,e)}));if("mouse"===n.inputType){o.on("mouseover",(function(){return e.updateEventRect()})).on("mousemove",(function(){var t=function(){var t=a.c?e.getDataIndexFromEvent(a.c):r.currentIdx;return t>-1?r.data[t]:null}();if(!(n.dragging||n.flowing||e.hasArcType()||!t||i.tooltip_grouped&&t&&t.index===r.currentIdx)){var c=t.index;e.isStepType(t)&&"step-after"===i.line_step_type&&Object(s.a)(this)[0]<e.scale.x(e.getXValue(t.id,c))&&(c-=1),c!==r.currentIdx&&(e.setOverOut(!1,r.currentIdx),r.currentIdx=c),-1===c?e.unselectRect():e.selectRectForSingle(this,o,c),e.setOverOut(-1!==c,c)}})).on("mouseout",(function(){i&&!e.hasArcType()&&-1!==r.currentIdx&&(e.unselectRect(),e.setOverOut(!1,r.currentIdx),r.currentIdx=-1)}))}return o},clickHandlerForSingleX:function(t,e){var i=e,n=i.config,a=i.state,r=i.$el.main;if(!t||i.hasArcType()||a.cancelClick)a.cancelClick&&(a.cancelClick=!1);else{var s=t.index;r.selectAll("."+X.shape+"-"+s).each((function(t){(n.data_selection_grouped||i.isWithinShape(this,t))&&(i.toggleShape&&i.toggleShape(this,t,s),n.data_onclick.bind(i.api)(t,this))}))}},generateEventRectsForMultipleXs:function(t){var e=this,i=e.state.inputType;t.on("click",(function(){e.clickHandlerForMultipleXS.bind(this)(e)})),"mouse"===i&&t.on("mouseover mousemove",(function(){e.selectRectForMultipleXs(this)})).on("mouseout",(function(){e.config&&!e.hasArcType()&&e.unselectRect()}))},clickHandlerForMultipleXS:function(t){var e=t,i=e.config,n=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(n)){var a=Object(s.a)(this),r=e.findClosestFromTargets(n,a);r&&(e.isBarType(r.id)||e.dist(r,a)<i.point_sensitivity)&&e.$el.main.selectAll("."+X.shapes+e.getTargetSelectorSuffix(r.id)).selectAll("."+X.shape+"-"+r.index).each((function(){(i.data_selection_grouped||e.isWithinShape(this,r))&&(e.toggleShape&&e.toggleShape(this,r,r.index),i.data_onclick.bind(e.api)(r,this))}))}}},Ge={generateFlow:function(t){var e=this,i=e.data,n=e.state,a=e.$el;return function(){var r=t.flow.length;n.flowing=!0,i.targets.forEach((function(t){t.values.splice(0,r)})),e.updateXGrid&&e.updateXGrid(!0);var s={};["axis.x","grid.x","gridLines.x","region.list","text","bar","line","area","circle"].forEach((function(t){var e=t.split("."),i=a[e[0]];i&&e.length>1&&(i=i[e[1]]),i&&i.size()&&(s[t]=i)})),e.hideGridFocus(),e.setFlowList(s,t)}},setFlowList:function(t,e){var i=this,n=e.flow,a=e.targets,r=n.duration,s=void 0===r?e.duration:r,o=n.index,c=n.length,l=n.orgDataCount,u=i.getFlowTransform(a,l,o,c),d=jt(),h=Object(f.b)().ease(I.a).duration(s);d.add(Object.keys(t).map((function(e){var n=t[e];return n="axis.x"===e?n.transition(h).call((function(t){return i.axis.x.setTransition(h).create(t)})):"region.list"===e?n.filter(i.isRegionOnX).transition(h).attr("transform",u):n.transition(h).attr("transform",u)}))),h.call(d,(function(){i.cleanUpFlow(t,e)}))},cleanUpFlow:function(t,e){var i=this,n=i.config,a=i.state,r=i.$el.svg,s=n.axis_rotated,o=e.flow,c=e.shape,l=e.xv,u=c.pos,d=u.cx,h=u.cy,g=u.xForText,f=u.yForText,p=o.done,x=void 0===p?function(){}:p,v=o.length;v&&(["circle","text","shape","eventRect"].forEach((function(t){for(var e=[],i=0;i<v;i++)e.push("."+X[t]+"-"+i);r.selectAll("."+X[t+"s"]).selectAll(e).remove()})),r.select("."+X.xgrid).remove()),Object.keys(t).forEach((function(e){var r=t[e];if("axis.x"!==e&&r.attr("transform",null),"grid.x"===e)r.attr(a.xgridAttr);else if("gridLines.x"===e)r.attr("x1",s?0:l).attr("x2",s?a.width:l);else if("gridLines.x"===e)r.select("line").attr("x1",s?0:l).attr("x2",s?a.width:l),r.select("text").attr("x",s?a.width:0).attr("y",l);else if(/^(area|bar|line)$/.test(e))r.attr("d",c.type[e]);else if("text"===e)r.attr("x",g).attr("y",f).style("fill-opacity",i.opacityForText.bind(i));else if("circle"===e)if(i.isCirclePoint())r.attr("cx",d).attr("cy",h);else{r.attr("x",(function(t){return d(t)-n.point_r})).attr("y",(function(t){return h(t)-n.point_r})).attr("cx",d).attr("cy",h)}else"region.list"===e&&r.select("rect").filter(i.isRegionOnX).attr("x",i.regionX.bind(i)).attr("width",i.regionWidth.bind(i))})),n.interaction_enabled&&i.redrawEventRect(),x.call(i.api),a.flowing=!1},getFlowTransform:function(t,e,i,n){var a,r=this,s=r.data,o=r.scale.x,c=s.targets[0].values,l=r.getValueOnIndex(c,i),u=r.getValueOnIndex(c,i+n),d=o.domain(),h=r.updateXDomain(t,!0,!0);return e?a=1===e||(l&&l.x)===(u&&u.x)||r.axis.isTimeSeries()?o(d[0])-o(h[0]):o(l.x)-o(u.x):1!==c.length?a=o(d[0])-o(h[0]):r.axis.isTimeSeries()?(l=r.getValueOnIndex(c,0),u=r.getValueOnIndex(c,c.length-1),a=o(l.x)-o(u.x)):a=it(h)/2,"translate("+a+",0) scale("+it(d)/it(h)+",1)"}},We={initClip:function(){var t=this,e=t.state.clip;e.id=t.state.datetimeId+"-clip",e.idXAxis=e.id+"-xaxis",e.idYAxis=e.id+"-yaxis",e.idGrid=e.id+"-grid",e.path=t.getClipPath(e.id),e.pathXAxis=t.getClipPath(e.idXAxis),e.pathYAxis=t.getClipPath(e.idYAxis),e.pathGrid=t.getClipPath(e.idGrid)},getClipPath:function(t){var e=this.config;return!e.clipPath&&/-clip$/.test(t)||!e.axis_x_clipPath&&/-clip-xaxis$/.test(t)||!e.axis_y_clipPath&&/-clip-yaxis$/.test(t)?null:"url("+(!!H.navigator&&H.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":G.URL.split("#")[0])+"#"+t+")"},appendClip:function(t,e){e&&t.append("clipPath").attr("id",e).append("rect")},setXAxisClipPath:function(t){var e=this.config,i=this.state,n=i.margin,a=i.width,r=i.height,s=e.axis_rotated,o=Math.max(30,n.left)-(s?0:20),c=s?-(1+o):-(o-1),l=-Math.max(15,n.top),u=s?n.left+20:a+10+o,d=(s?n.top+r+10:n.bottom)+20;t.attr("x",c).attr("y",l).attr("width",u).attr("height",d)},setYAxisClipPath:function(t){var e=this.config,i=this.state,n=i.margin,a=i.width,r=i.height,s=e.axis_rotated,o=Math.max(30,n.left)-(s?20:0),c=e.axis_y_inner,l=c?-1:s?-(1+o):-(o-1),u=-(s?20:n.top),d=(s?a+15+o:n.left+20)+(c?20:0),h=(s?n.bottom:n.top+r)+10;t.attr("x",l).attr("y",u).attr("width",d).attr("height",h)},updateXAxisTickClip:function(){var t=this,e=t.config,i=t.state,n=i.clip,a=i.xAxisHeight,r=t.$el.defs,s=t.getHorizontalAxisHeight("x");if(r&&!n.idXAxisTickTexts){var o=n.id+"-xaxisticktexts";t.appendClip(r,o),n.pathXAxisTickTexts=t.getClipPath(n.idXAxisTickTexts),n.idXAxisTickTexts=o}!e.axis_x_tick_multiline&&t.getAxisTickRotate("x")&&s!==a&&(t.setXAxisTickClipWidth(),t.setXAxisTickTextClipPathWidth()),t.state.xAxisHeight=s},setXAxisTickClipWidth:function(){var t=this,e=t.config,i=t.state.current.maxTickWidths,n=t.getAxisTickRotate("x");if(!e.axis_x_tick_multiline&&n){var a=Math.sin(Math.PI/180*Math.abs(n));i.x.clipPath=(t.getHorizontalAxisHeight("x")-20)/a}else i.x.clipPath=null},setXAxisTickTextClipPathWidth:function(){var t=this.state,e=t.clip,i=t.current,n=this.$el.svg;n&&n.select("#"+e.idXAxisTickTexts+" rect").attr("width",i.maxTickWidths.x.clipPath).attr("height",30)}},Ue=function(t){return W(t.position)||"end"},Ze=function(t){return"start"===t.position?4:"middle"===t.position?0:-4};function Je(t,e,i){return function(n){var a=t?0:e;return"start"===n.position?a=t?-i:0:"middle"===n.position&&(a=(t?-i:e)/2),a}}function Ke(t,e){"grid"===e&&t.each((function(){var t=Object(r.a)(this);["x1","x2","y1","y2"].forEach((function(e){return t.attr(e,Math.ceil(+t.attr(e)))}))}))}var qe={hasGrid:function(){var t=this.config;return["x","y"].some((function(e){return t["grid_"+e+"_show"]||t["grid_"+e+"_lines"].length}))},initGrid:function(){var t=this;t.hasGrid()&&t.initGridLines(),t.initFocusGrid()},initGridLines:function(){var t=this,e=t.config,i=t.state.clip,n=t.$el;(e.grid_x_lines.length||e.grid_y_lines.length)&&(n.gridLines.main=n.main.insert("g","."+X.chart+(e.grid_lines_front?" + *":"")).attr("clip-path",i.pathGrid).attr("class",X.grid+" "+X.gridLines),n.gridLines.main.append("g").attr("class",X.xgridLines),n.gridLines.main.append("g").attr("class",X.ygridLines),n.gridLines.x=Object(c.a)([]))},updateXGrid:function(t){var e=this,i=e.config,n=e.scale,a=e.state,s=e.$el,o=s.main,c=s.grid,l=i.axis_rotated,u=e.generateGridData(i.grid_x_type,n.x),d=e.axis.isCategorized()?e.axis.x.tickOffset():0,h=function(t){return(n.zoom||n.x)(t)+d*(l?-1:1)};a.xgridAttr=l?{x1:0,x2:a.width,y1:h,y2:h}:{x1:h,x2:h,y1:0,y2:a.height},c.x=o.select("."+X.xgrids).selectAll("."+X.xgrid).data(u),c.x.exit().remove(),c.x=c.x.enter().append("line").attr("class",X.xgrid).merge(c.x),t||c.x.each((function(){var t=Object(r.a)(this);Object.keys(a.xgridAttr).forEach((function(e){t.attr(e,a.xgridAttr[e]).style("opacity",(function(){return t.attr(l?"y1":"x1")===(l?a.height:0)?"0":"1"}))}))}))},updateYGrid:function(){var t=this,e=t.config,i=t.state,n=t.$el,a=n.grid,r=n.main,s=e.axis_rotated,o=t.axis.y.tickValues()||t.scale.y.ticks(e.grid_y_ticks),c=function(e){return Math.ceil(t.scale.y(e))};a.y=r.select("."+X.ygrids).selectAll("."+X.ygrid).data(o),a.y.exit().remove(),a.y=a.y.enter().append("line").attr("class",X.ygrid).merge(a.y),a.y.attr("x1",s?c:0).attr("x2",s?c:i.width).attr("y1",s?0:c).attr("y2",s?i.height:c),Ke(a.y,"grid")},updateGrid:function(t){var e=this,i=e.$el,n=i.grid;!i.gridLines.main&&e.initGridLines(),n.main.style("visibility",e.hasArcType()?"hidden":"visible"),e.hideGridFocus(),e.updateXGridLines(t),e.updateYGridLines(t)},updateXGridLines:function(t){var e=this,i=e.config,n=e.$el,a=n.gridLines,r=n.main,s=i.axis_rotated;i.grid_x_show&&e.updateXGrid();var o=r.select("."+X.xgridLines).selectAll("."+X.xgridLine).data(i.grid_x_lines);o.exit().transition().duration(t).style("opacity","0").remove();var c=o.enter().append("g");c.append("line").style("opacity","0"),c.append("text").attr("transform",s?"":"rotate(-90)").attr("dy",-5).style("opacity","0"),(o=c.merge(o)).attr("class",(function(t){return(X.xgridLine+" "+(t.class||"")).trim()})).select("text").attr("text-anchor",Ue).attr("dx",Ze).transition().duration(t).text((function(t){return t.text})).transition().style("opacity","1"),a.x=o},updateYGridLines:function(t){var e=this,i=e.config,n=e.state,a=n.width,r=n.height,s=e.$el,o=i.axis_rotated;i.grid_y_show&&e.updateYGrid();var c=s.main.select("."+X.ygridLines).selectAll("."+X.ygridLine).data(i.grid_y_lines);c.exit().transition().duration(t).style("opacity","0").remove();var l=c.enter().append("g");l.append("line").style("opacity","0"),l.append("text").attr("transform",o?"rotate(-90)":"").style("opacity","0"),c=l.merge(c);var u=e.yv.bind(e);c.attr("class",(function(t){return(X.ygridLine+" "+(t.class||"")).trim()})).select("line").transition().duration(t).attr("x1",o?u:0).attr("x2",o?u:a).attr("y1",o?0:u).attr("y2",o?r:u).transition().style("opacity","1"),c.select("text").attr("text-anchor",Ue).attr("dx",Ze).transition().duration(t).attr("dy",-5).attr("x",Je(o,a,r)).attr("y",u).text((function(t){return t.text})).transition().style("opacity","1"),s.gridLines.y=c},redrawGrid:function(t){var e=this,i=e.config.axis_rotated,n=e.state,a=n.width,r=n.height,s=e.$el.gridLines,o=e.xv.bind(e),c=s.x.select("line"),l=s.x.select("text");return c=(t?c.transition():c).attr("x1",i?0:o).attr("x2",i?a:o).attr("y1",i?o:0).attr("y2",i?o:r),l=(t?l.transition():l).attr("x",Je(!i,a,r)).attr("y",o).text((function(t){return t.text})),[c.style("opacity","1"),l.style("opacity","1")]},initFocusGrid:function(){var t=this,e=t.config,i=t.state.clip,n=t.$el,a=e.grid_front,r="."+X[a&&n.gridLines.main?"gridLines":"chart"]+(a?" + *":""),s=n.main.insert("g",r).attr("clip-path",i.pathGrid).attr("class",X.grid);n.grid.main=s,e.grid_x_show&&s.append("g").attr("class",X.xgrids),e.grid_y_show&&s.append("g").attr("class",X.ygrids),e.interaction_enabled&&e.grid_focus_show&&(s.append("g").attr("class",X.xgridFocus).append("line").attr("class",X.xgridFocus),e.grid_focus_y&&!e.tooltip_grouped&&s.append("g").attr("class",X.ygridFocus).append("line").attr("class",X.ygridFocus))},showGridFocus:function(t){var e=this,i=e.config,n=e.state,a=n.width,s=n.height,o=i.axis_rotated,c=e.$el.main.selectAll("line."+X.xgridFocus+", line."+X.ygridFocus),l=(t||[c.datum()]).filter((function(t){return t&&W(e.getBaseValue(t))}));if(i.tooltip_show&&0!==l.length&&!e.hasType("bubble")&&!e.hasArcType()){var u=i.grid_focus_edge&&!i.tooltip_grouped,d=e.xx.bind(e);c.style("visibility","visible").data(l.concat(l)).each((function(t){var i,n=Object(r.a)(this),c={x:d(t),y:e.getYScaleById(t.id)(t.value)};if(n.classed(X.xgridFocus))i=o?[null,c.x,u?c.y:a,c.x]:[c.x,u?c.y:null,c.x,s];else{var l="y2"===e.axis.getId(t.id);i=o?[c.y,u&&!l?c.x:null,c.y,u&&l?c.x:s]:[u&&l?c.x:null,c.y,u&&!l?c.x:a,c.y]}["x1","y1","x2","y2"].forEach((function(t,e){return n.attr(t,i[e])}))})),Ke(c,"grid"),e.showCircleFocus&&e.showCircleFocus(t)}},hideGridFocus:function(){var t=this,e=t.state,i=e.inputType,n=e.resizing,a=t.$el.main;"mouse"!==i&&n||(a.selectAll("line."+X.xgridFocus+", line."+X.ygridFocus).style("visibility","hidden"),t.hideCircleFocus&&t.hideCircleFocus())},updateGridFocus:function(){var t=this,e=t.state,i=e.inputType,n=e.width,a=e.height,r=e.resizing,s=t.$el.grid.main.select("line."+X.xgridFocus);if("touch"===i)s.empty()?r&&t.showCircleFocus():t.showGridFocus();else{var o=t.config.axis_rotated;s.attr("x1",o?0:-10).attr("x2",o?n:-10).attr("y1",o?-10:0).attr("y2",o?-10:a)}return!0},generateGridData:function(t,e){var i=this.$el.main.select("."+X.axisX).selectAll(".tick").size(),n=[];if("year"===t)for(var a=this.getXDomain(),r=a[0].getFullYear(),s=a[1].getFullYear(),o=r;o<=s;o++)n.push(new Date(o+"-01-01 00:00:00"));else(n=e.ticks(10)).length>i&&(n=n.filter((function(t){return String(t).indexOf(".")<0})));return n},getGridFilterToRemove:function(t){return t?function(e){var i=!1;return(st(t)?t.concat():[t]).forEach((function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(i=!0)})),i}:function(){return!0}},removeGridLines:function(t,e){var i=this,n=i.config,a=i.getGridFilterToRemove(t),r=e?X.xgridLines:X.ygridLines,s=e?X.xgridLine:X.ygridLine;i.$el.main.select("."+r).selectAll("."+s).filter(a).transition().duration(n.transition_duration).style("opacity","0").remove();var o="grid_"+(e?"x":"y")+"_lines";n[o]=n[o].filter((function(t){return!a(t)}))}},Qe={initRegion:function(){var t=this.$el;t.region.main=t.main.append("g").attr("clip-path",this.state.clip.path).attr("class",X.regions)},updateRegion:function(t){var e=this,i=e.config,n=e.$el;n.region.main||e.initRegion(),n.region.main.style("visibility",e.hasArcType()?"hidden":"visible");var a=n.main.select("."+X.regions).selectAll("."+X.region).data(i.regions);a.exit().transition().duration(t).style("opacity","0").remove(),(a=a.enter().append("g").merge(a).attr("class",e.classRegion.bind(e))).append("rect").style("fill-opacity","0"),n.region.list=a},redrawRegion:function(t){var e=this,i=e.$el.region.list.select("rect");return i=(t?i.transition():i).attr("x",e.regionX.bind(e)).attr("y",e.regionY.bind(e)).attr("width",e.regionWidth.bind(e)).attr("height",e.regionHeight.bind(e)),[(t?i.transition():i).style("fill-opacity",(function(t){return W(t.opacity)?t.opacity:"0.1"})).on("end",(function(){Object(r.a)(this.parentNode).selectAll("rect:not([x])").remove()}))]},getRegionXY:function(t,e){var i=this,n=i.config,a=i.scale,r=n.axis_rotated,s="x"===t,o="start",c=0;return"y"===e.axis||"y2"===e.axis?(s||(o="end"),(s?r:!r)&&o in e&&(c=(0,a[e.axis])(e[o]))):(s?!r:r)&&o in e&&(c=(a.zoom||a.x)(i.axis.isTimeSeries()?Ct.call(i,e[o]):e[o])),c},regionX:function(t){return this.getRegionXY("x",t)},regionY:function(t){return this.getRegionXY("y",t)},getRegionSize:function(t,e){var i=this,n=i.config,a=i.scale,r=i.state,s=n.axis_rotated,o="width"===t,c=i[o?"regionX":"regionY"](e),l="end",u=r[t];return"y"===e.axis||"y2"===e.axis?(o||(l="start"),(o?s:!s)&&l in e&&(u=(0,a[e.axis])(e[l]))):(o?!s:s)&&l in e&&(u=(a.zoom||a.x)(i.axis.isTimeSeries()?Ct.call(i,e[l]):e[l])),u<c?0:u-c},regionWidth:function(t){return this.getRegionSize("width",t)},regionHeight:function(t){return this.getRegionSize("height",t)},isRegionOnX:function(t){return!t.axis||"x"===t.axis}},ti={getAxisSize:function(t){var e=this,i=e.config.axis_rotated;return i&&"x"===t||!i&&/y2?/.test(t)?e.getAxisWidthByAxisId(t,!0):e.getHorizontalAxisHeight(t)},getAxisWidthByAxisId:function(t,e){var i=this;if(i.axis){var n=i.axis&&i.axis.getLabelPositionById(t);return i.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)}return 40},getHorizontalAxisHeight:function(t){var e=this,i=e.config,n=e.state,a=n.current,r=n.rotatedPadding,s=n.isLegendRight,o=n.isLegendInset,c=i.axis_rotated,l=30;if("x"===t&&!i.axis_x_show)return 8;if("x"===t&&i.axis_x_height)return i.axis_x_height;if("y"===t&&!i.axis_y_show)return!i.legend_show||s||o?1:10;if("y2"===t&&!i.axis_y2_show)return r.top;var u=e.getAxisTickRotate(t);return("x"===t&&!c||/y2?/.test(t)&&c)&&u&&(l=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-u)/180),!i.axis_x_tick_multiline&&a.height&&l>a.height/2&&(l=a.height/2)),l+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"!==t||c?0:-10)},getEventRectWidth:function(){return Math.max(0,this.axis.x.tickInterval())},getAxisTickRotate:function(t){var e=this,i=e.axis,n=e.config,a=e.state,r=e.$el,s=n["axis_"+t+"_tick_rotate"];if("x"===t){var o=i.isCategorized()||i.isTimeSeries();if(n.axis_x_tick_fit&&o){var c=n.axis_x_tick_count,l=a.current.maxTickWidths.x.ticks.length,u=0;c?u=c>l?l:c:l&&(u=l),u!==a.axis.x.tickCount&&(a.axis.x.padding=e.axis.getXAxisPadding(u)),a.axis.x.tickCount=u}r.svg&&n.axis_x_tick_fit&&!n.axis_x_tick_multiline&&!n.axis_x_tick_culling&&n.axis_x_tick_autorotate&&o&&(s=e.needToRotateXAxisTickTexts()?n.axis_x_tick_rotate:0)}return s},needToRotateXAxisTickTexts:function(){var t=this,e=t.state,i=e.axis,n=e.current.width-t.getCurrentPaddingLeft(!1)-t.getCurrentPaddingRight(),a=i.x.tickCount+i.x.padding.left+i.x.padding.right;return t.axis.getMaxTickWidth("x")>(a?n/a:0)}},ei={axis_y_clipPath:!0,axis_y_show:!0,axis_y_type:"indexed",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_culling:!1,axis_y_tick_culling_max:5,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_show:!0,axis_y_tick_stepSize:null,axis_y_tick_text_show:!0,axis_y_tick_text_position:{x:0,y:0},axis_y_tick_time_value:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y_axes:[]},ii={axis_y2_show:!1,axis_y2_type:"indexed",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_culling:!1,axis_y2_tick_culling_max:5,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_rotate:0,axis_y2_tick_count:void 0,axis_y2_tick_show:!0,axis_y2_tick_stepSize:null,axis_y2_tick_text_show:!0,axis_y2_tick_text_position:{x:0,y:0},axis_y2_padding:{},axis_y2_default:void 0,axis_y2_axes:[]},ni=z(z(z({axis_rotated:!1},{axis_x_clipPath:!0,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_show:!0,axis_x_tick_text_show:!0,axis_x_tick_text_position:{x:0,y:0},axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_autorotate:!1,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_tooltip:!1,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_x_axes:[]}),ei),ii),ai=[Ie,{category:function(t,e){var i=this.internal,n=i.config;return arguments.length>1&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},categories:function(t){var e=this.internal,i=e.config;return arguments.length?(i.axis_x_categories=t,e.redraw(),i.axis_x_categories):i.axis_x_categories}},Xe,Fe,$e,ze,Me,Be],ri=[Ve,We,He,Ge,qe,Qe,ti],si=[{data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_axes:{},data_regions:{},data_stack_normalize:!1},ni,{grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_edge:!1,grid_focus_show:!0,grid_focus_y:!1,grid_front:!1,grid_lines_front:!0}],oi={initBar:function(){var t=this.$el;t.bar=t.main.select("."+X.chart).insert("g",":first-child").attr("class",X.chartBars)},updateTargetsForBar:function(t){var e=this,i=e.config,n=e.$el,a=e.getChartClass("Bar"),r=e.getClass("bars",!0),s=e.classFocus.bind(e),o=i.interaction_enabled&&i.data_selection_isselectable;n.bar||e.initBar(),e.$el.main.select("."+X.chartBars).selectAll("."+X.chartBar).data(t).attr("class",(function(t){return a(t)+s(t)})).enter().append("g").attr("class",a).style("opacity","0").style("pointer-events","none").append("g").attr("class",r).style("cursor",(function(t){return o&&o.bind(e.api)(t)?"pointer":null}))},updateBar:function(t){var e=this,i=e.$el,n=e.barData.bind(e),a=e.getClass("bar",!0),r=e.initialOpacity.bind(e);i.bar=i.main.selectAll("."+X.bars).selectAll("."+X.bar).data(n),i.bar.exit().transition().duration(t).style("opacity","0").remove(),i.bar=i.bar.enter().append("path").attr("class",a).style("fill",e.color).merge(i.bar).style("opacity",r)},redrawBar:function(t,e){var i=this.$el.bar;return[(e?i.transition(xt()):i).attr("d",t).style("fill",this.color).style("opacity","1")]},getBarW:function(t,e){var i=this,n=i.config,a=i.org,r=i.scale,s=i.getMaxDataCount(),o=n.data_groups.length,c=r.zoom&&!i.axis.isCategorized()?a.xDomain.map((function(t){return r.zoom(t)})).reduce((function(t,e){return Math.abs(t)+e}))/s:t.tickInterval(s),l=function(t){var i=t?n.bar_width[t]:n.bar_width,a=t?i.ratio:n.bar_width_ratio,r=t?i.max:n.bar_width_max,s=J(i)?i:e?c*a/e:0;return r&&s>r?r:s},u=l();return!o&&nt(n.bar_width)&&(u={_$width:u,_$total:[]},i.filterTargetsToShow(i.data.targets).forEach((function(t){n.bar_width[t.id]&&(u[t.id]=l(t.id),u._$total.push(u[t.id]||u._$width))}))),u},getBars:function(t,e){var i=this.$el.main,n=W(t)?"-"+t:"";return(e?i.selectAll("."+X.bars+this.getTargetSelectorSuffix(e)):i).selectAll("."+X.bar+n)},expandBars:function(t,e,i){i&&this.unexpandBars(),this.getBars(t,e).classed(X.EXPANDED,!0)},unexpandBars:function(t){this.getBars(t).classed(X.EXPANDED,!1)},generateDrawBar:function(t,e){var i=this.config,n=this.generateGetBarPoints(t,e),a=i.axis_rotated,r=i.data_groups.length,s=i.bar_radius,o=i.bar_radius_ratio,c=J(s)&&s>0?function(){return s}:J(o)?function(t){return t*o}:null;return function(t,e){var i=n(t,e),s=+a,o=+!s,l=t.value<0,u=["",""],d=0;if(c&&!r){var h=a?o:s,g=i[2][h]-i[0][h],f="a"+(d=c(g))+","+d+" "+(l?"1 0 0":"0 0 1")+" ";u[+!a]=""+f+d+","+d,u[+a]=""+f+[-d,d][a?"sort":"reverse"](),l&&u.reverse()}var p=a?"H"+(i[1][s]-d)+" "+u[0]+"V"+(i[2][o]-d)+" "+u[1]+"H"+i[3][s]:"V"+(i[1][o]+(l?-d:d))+" "+u[0]+"H"+(i[2][s]-d)+" "+u[1]+"V"+i[3][o];return"M"+i[0][s]+","+i[0][o]+p+"z"}},generateGetBarPoints:function(t,e){var i=this,n=i.config,a=e?i.axis.subX:i.axis.x,r=i.getIndicesMax(t)+1,s=i.getBarW(a,r),o=i.getShapeX(s,t,!!e),c=i.getShapeY(!!e),l=i.getShapeOffset(i.isBarType,t,!!e),u=i.getYScaleById.bind(i);return function(t,a){var r=u.call(i,t.id,e)(i.getShapeYMin(t.id)),d=l(t,a)||r,h=J(s)?s:s[t.id]||s._$width,g=o(t),f=c(t);n.axis_rotated&&(t.value>0&&f<r||t.value<0&&r<f)&&(f=r);var p=g+h;return[[g,d],[g,f-=r-d],[p,f],[p,d]]}},isWithinBar:function(t){var e=Object(s.a)(t),i=gt(t),n=i[0],a=i[1],r=Math.min(n.x,a.x),o=Math.min(n.y,a.y),c=this.config.bar_sensitivity,l=t.getBBox(),u=r+l.width+c,d=o+l.height+c,h=o-c;return r-c<e[0]&&e[0]<u&&h<e[1]&&e[1]<d}};var ci={bar_label_threshold:0,bar_padding:0,bar_radius:void 0,bar_radius_ratio:void 0,bar_sensitivity:2,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0};Math.PI;function li(t,e){mt(pe.prototype,ri.concat(t)),mt(Oe.prototype,ai),Rt.setOptions(si.concat(e||[]))}var ui=function(){return li([oi],ci),(ui=function(){return qt.BAR})()};var di=function(t){var e,i=this.internal,n=i.config,a=i.scale,r=t;if(n.zoom_enabled&&r){if(i.axis.isTimeSeries()&&(r=r.map((function(t){return Ct.bind(i)(t)}))),function(t,e){var i=e[0],n=e[1];return t.every((function(t,e){return 0===e?t>=i:t<=n}))}(r,i.getZoomDomain())){if(i.api.tooltip.hide(),n.subchart_show){var s=a.zoom||a.x;i.brush.getSelection().call(i.brush.move,[s(r[0]),s(r[1])]),e=r}else a.x.domain(r),a.zoom=a.x,i.axis.x.scale(a.zoom),e=a.zoom.orgDomain();i.redraw({withTransition:!0,withY:n.zoom_rescale,withDimension:!1}),i.setZoomResetButton(),lt(n.zoom_onzoom,i.api,e)}}else e=a.zoom?a.zoom.domain():a.x.orgDomain();return e};mt(di,{enable:function(t){var e=this.internal,i=e.config;/^(drag|wheel)$/.test(t)&&(i.zoom_type=t),i.zoom_enabled=!!t,e.zoom?!1===t&&e.bindZoomEvent(!1):(e.initZoom(),e.bindZoomEvent()),e.updateAndRedraw()},max:function(t){var e=this.internal,i=e.config,n=e.org.xDomain;return(0===t||t)&&(i.zoom_x_max=St("max",[n[1],t])),i.zoom_x_max},min:function(t){var e=this.internal,i=e.config,n=e.org.xDomain;return(0===t||t)&&(i.zoom_x_min=St("min",[n[0],t])),i.zoom_x_min},range:function(t){var e=this.zoom;if(ot(t)){var i=t.min,n=t.max;q(i)&&e.min(i),q(n)&&e.max(n)}return{min:e.min(),max:e.max()}}});z(z({},{drag:function(t){var e=this,i=e.config,n=e.state,a=e.$el.main,s=i.data_selection_grouped,o=i.interaction_enabled&&i.data_selection_isselectable;if(!e.hasArcType()&&i.data_selection_enabled&&(!i.zoom_enabled||e.zoom.altDomain)&&i.data_selection_multiple){var c=n.dragStart||[0,0],l=c[0],u=c[1],d=t[0],h=t[1],g=Math.min(l,d),f=Math.max(l,d),p=s?n.margin.top:Math.min(u,h),x=s?n.height:Math.max(u,h);a.select("."+X.dragarea).attr("x",g).attr("y",p).attr("width",f-g).attr("height",x-p),a.selectAll("."+X.shapes).selectAll("."+X.shape).filter((function(t){return o&&o.bind(e.api)(t)})).each((function(t,i){var n,a=Object(r.a)(this),s=a.classed(X.SELECTED),o=a.classed(X.INCLUDED),c=!1;if(a.classed(X.circle)){var l=1*+a.attr("cx"),u=1*+a.attr("cy");n=e.togglePoint,c=g<l&&l<f&&p<u&&u<x}else{if(!a.classed(X.bar))return;var d=function(t){var e=t.getBoundingClientRect(),i=e.width,n=e.height,a=gt(t);return{x:a[0].x,y:Math.min(a[0].y,a[1].y),width:i,height:n}}(this),h=(l=d.x,u=d.y,d.width),v=d.height;n=e.togglePath,c=!(f<l||l+h<g)&&!(x<u||u+v<p)}c^o&&(a.classed(X.INCLUDED,!o),a.classed(X.SELECTED,!s),n.call(e,!s,a,t,i))}))}},dragstart:function(t){var e=this,i=e.config,n=e.state,a=e.$el.main;!e.hasArcType()&&i.data_selection_enabled&&(n.dragStart=t,a.select("."+X.chart).append("rect").attr("class",X.dragarea).style("opacity","0.1"),e.setDragStatus(!0))},dragend:function(){var t=this,e=t.config,i=t.$el.main;!t.hasArcType()&&e.data_selection_enabled&&(i.select("."+X.dragarea).transition().duration(100).style("opacity","0").remove(),i.selectAll("."+X.shape).classed(X.INCLUDED,!1),t.setDragStatus(!1))}}),{selectPoint:function(t,e,i){var n=this,a=n.config,r=n.$el.main,s=a.axis_rotated,o=(s?n.circleY:n.circleX).bind(n),c=(s?n.circleX:n.circleY).bind(n),l=n.pointSelectR.bind(n);lt(a.data_onselected,n.api,e,t.node()),r.select("."+X.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+X.selectedCircle+"-"+i).data([e]).enter().append("circle").attr("class",(function(){return n.generateClass(X.selectedCircle,i)})).attr("cx",o).attr("cy",c).attr("stroke",n.color).attr("r",(function(t){return 1.4*n.pointSelectR(t)})).transition().duration(100).attr("r",l)},unselectPoint:function(t,e,i){var n=this,a=n.config,r=n.$el;lt(a.data_onunselected,n.api,e,t.node()),r.main.select("."+X.selectedCircles+n.getTargetSelectorSuffix(e.id)).selectAll("."+X.selectedCircle+"-"+i).transition().duration(100).attr("r",0).remove()},togglePoint:function(t,e,i,n){this[(t?"":"un")+"selectPoint"](e,i,n)},selectPath:function(t,e){var i=this,n=i.config;lt(n.data_onselected,i.api,e,t.node()),n.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return Object(R.b)(i.color(e)).brighter(.75)}))},unselectPath:function(t,e){var i=this,n=i.config;lt(n.data_onunselected,i.api,e,t.node()),n.interaction_brighten&&t.transition().duration(100).style("fill",(function(){return i.color(e)}))},togglePath:function(t,e,i,n){this[(t?"":"un")+"selectPath"](e,i,n)},getToggle:function(t,e){var i=this;return"path"===t.nodeName?i.togglePath:i.isStepType(e)?function(){}:i.togglePoint},toggleShape:function(t,e,i){var n,a=this,s=a.config,o=a.$el.main,c=Object(r.a)(t),l=c.classed(X.SELECTED),u=a.getToggle(t,e).bind(a);if(s.data_selection_enabled&&s.data_selection_isselectable.bind(a.api)(e)){if(!s.data_selection_multiple){var d="."+X.shapes;s.data_selection_grouped&&(d+=a.getTargetSelectorSuffix(e.id)),o.selectAll(d).selectAll("."+X.shape).each((function(t,e){var i=Object(r.a)(this);i.classed(X.SELECTED)&&(n=i,u(!1,i.classed(X.SELECTED,!1),t,e))}))}n&&n.node()===c.node()||(c.classed(X.SELECTED,!l),u(!l,c,e,i))}}});var hi={},gi={version:"2.2.6",generate:function(t){var e=kt({},hi,t),i=new Oe(e);return i.internal.charts=this.instance,this.instance.push(i),i},defaults:function(t){return ot(t)&&(hi=t),hi},instance:[],plugin:{}};e.b=gi}).call(this,i("ntbh"))}}]);